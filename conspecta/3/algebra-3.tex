\documentclass[a4paper]{report}

\usepackage{../mathstemplate}
\usepackage{textcomp}

\date{III семестр, осень 2023 г.}
\title{Алгебра. Неофициальный конспект}
\author{Лекторы: Николай Александрович Вавилов \\ Степанов Алексей Владимирович \and \\ Конспектировал Леонид Данилевич}

\begin{document}

    \shorthandoff{"}
    \maketitle
    Изначально предполагалось, что лекции будет читать Николай Александрович Вавилов.

    13 сентября была прочитана третья лекция.
    Николай Александрович прекрасно выглядел, сообщил о пересдаче в следующем месяце, а после лекции как обычно остался, чтобы отвечать на вопросы.
    Я подошёл с вопросом о том, почему спин полуцелый (да, к лектору по алгебре --- это было упомянуто на лекции с обоснованием того, что $\R P^2$ двулистно накрывает плоскость (может, я ошибаюсь)).
    Николай Александрович что-то говорил про специальный индийский танец с чашей, про привязывание греческого кратера резинками за обе ручки к стенкам с последующим закручиванием, и про спиноры.
    К сожалению, про это я так ничего и не понял --- сложно описывать повороты трёхмерного тела в пространстве, а о спинорах я слышал в первый раз.

    Уже выйдя на улицу, я потом в шутку предложил на следующий день принести греческую чашу и резинки, чтобы Николай Александрович сам всё показал --- 14 сентября была запланирована очередная, четвёртая, лекция.

    Я пришёл на неё за несколько минут до начала, и с удивлением увидел, что у аудитории стоит лишь несколько человек.
    Оказалось, лекцию отменили --- Николай Алесандрович внезапно плохо себя почувствовал, и сообщил об этом администраторам.
    Нам написали, что 14 сентября лекции не будет, и её проведут в другой день.

    А уже вечером того дня до нас сарафанной почтой дошло известие о смерти учителя.
    Мой одногруппник, Лев, поделился чьим-то сообщением с фотографией записи, приписав <<Это правда?>>

    Сначала, кажется, никто не поверил.
    Я увидел текст, и подумал: <<И ведь действительно, сегодня лекции не было.
    Но он заболел, а не умер, что за глупая шутка>>.
    Потом я проверил, что запись на стене поделившегося человека действительно существует, и в ту же секунду Лев написал, что, похоже, это не шутка.

    Это была не шутка.

    Николай Александрович Вавилов, наш учитель алгебры, прекрасный преподаватель, которого любили, кажется, все, скоропостижно скончался 14 сентября 2023 года.

%    Все последующие лекции прочитаны Алексеем Владимировичем Степановым.
    \tableofcontents
    \newpage
    \setcounter{lection}{0}

    %полилинейная алгебра, теория представлений конечных групп, теория категорий


    \input{polylinear.tex}
    \input{representations.tex}


    \chapter{Теория категорий}
    \newlection{14 ноября 2023 г.}
    До сих пор в повествовании использовались объекты, которые представлялись в системе аксоим ZFC, как множества.

    Теория категорий изучает подчас настолько большие \emph{классы} объектов-множеств, что в множество их не поместить.
    Так, банальным примером является категория всех множеств, и, как широко известно, множество всех множеств образовать нельзя.

    Ввиду этого в теории категорий используются \emph{классы}.
    Для наших потребностей достаточно думать, что классы ведут себя похоже на множество, но лишь могут содержать больше объектов, чем способно множество.
    C классами надо обращаться осторожно: например, нельзя создать класс всех подклассов данного класса.

    В дальнейшем повествовании данные теоретико-множественные тонкости будут опущены.
    \definition[Категория $\mathscr{C}$]{Совокупность следующих объектов:
    \bullets{
        \item Класс объектов $\Obj\mathscr{C}$.
        \item Для каждых $A, B \in \Obj\mathscr{C}$ множество морфизмов (стрелок) $\Mor_\mathscr{C}(A, B)$.

        Если $(A, B) \ne (A', B')$ (где $A,B,A',B'\in\Obj\mathscr{C}$), то $\Mor_\mathscr{C}(A, B) \cap \Mor_\mathscr{C}(A', B') = \o$.

        Таким образом, по морфизму $\alpha \in \Mor_\mathscr{C}(A, B)$ однозначно восстанавливаются $A, B$, их обозначают $A \bydef \source(\alpha), B = \target(\alpha)$
        \item Закон композиции морфизмов: $\forall A, B, C \in \Obj\mathscr{C}$ определено
        \begin{align*}
            \Mor_\mathscr{C}(B, C) \times \Mor_\mathscr{C}(A, B) &\map \Mor_\mathscr{C}(A, C)\\(\alpha,\beta)&\mapsto \alpha \beta
        \end{align*}
        \note{Иногда композицию записывают в обратном порядке: $\Mor_\mathscr{C}(A,B) \times \Mor_\mathscr{C}(B,C) \map \Mor_\mathscr{C}(A, C)$.}
        \item $\forall A \in \Obj\mathscr{C}$ определён тождественный морфизм $\id_A \in \Mor_\mathscr{C}(A, A)$, такой, что
        \[\forall B, C \in \Obj\mathscr{C}: \forall \beta \in \Mor_\mathscr{C}(A, B), \gamma \in \Mor_\mathscr{C}(C, A): \beta \id_A = \beta \text{ и }\id_A \gamma = \gamma\]
        \item Композиция ассоциативна, как только определена:
        \[\forall A, B, C, D \in \Obj\mathscr{C}: \forall \alpha \in \Mor_\mathscr{C}(A, B), \beta \in \Mor_\mathscr{C}(B, C), \gamma \in \Mor_\mathscr{C}(C, D): (\gamma \beta)\alpha = \gamma(\beta\alpha)\]
    }
    }
    Далее будем пользоваться сокращёнными обозначениями:
    \bullets{
        \item Вместо $A \in \Obj\mathscr{C}$ можно писать $A \in \mathscr{C}$.
        \item Вместо $\alpha \in \Mor_\mathscr{C}(A, B)$ можно писать $\alpha \in \Mor(A, B)$ или даже $\alpha: A \map B$, если категория ясна из контекста.
        В общем случае морфизм --- необязательно отображение, но в \emph{конкретных категориях} это так, поэтому удобно мыслить о морфизмах, как о отображениях.
        \item Также определим класс всех морфизмов данной категории $\Mor\mathscr{C} = \bigsqcup\limits_{A, B \in \mathscr{C}}\Mor(A, B)$.
    }
    \examples[Категории]{
        \item Категория $\cat{C}$ с одним объектом: $\Obj\mathscr{C} = \{A\}$. Аксиомы категории говорят, что $\Mor(A, A)$ --- моноид с нейтральным объектом $\id_A$.
        \item Конкретные категории --- неформально говоря, объекты со структурой, где морфизмы сохраняют данную структуру).
        \bullets{
            \item $\mathscr{Set}$. Объектами являются множества, морфизмами --- отображения.
            \item $\mathscr{Set}_*$. Объектами являются множества с отмеченной точкой $(X, x)$, $x \in X$, морфизмами --- отображения, сохраняющие отмеченную точку.
            \item $\mathscr{Group}$ --- категория групп с гомоморфизмами групп.
            \item $\mathscr{Ring}$ --- категория ассоциативных (необязательно коммутативных) колец с единицей с унитальными гомоморфизмами (сохраняющими единицу).
            \item $\mathscr{Rng}$ --- категория ассоциативных (необязательно коммутативных) колец с гомоморфизмами колец.
            \item $\mathscr{CRing}$ --- коммутативные кольца с единицей и унитальными гомоморфизмами.
            \item $\mathscr{CRng}$ --- коммутативные кольца с гомоморфизмами колец.
            \item $\mathscr{Ab}$ --- абелевы группы и аддитивные отображения.
            \item $\Lmod{R}$ --- левые $R$-модули и $R$-линейные отображения.
            \item $\modR{R}$ --- правые $R$-модули и $R$-линейные отображения.
            \item $\mathscr{Vect}_F$ --- конечномерные векторные пространства и $F$-линейные отображения.
            \item $\mathscr{Top}$ --- топологические пространства и непрерывные отображения.
            \item $\mathscr{Top}_*$ --- базированные топологические пространства (с отмеченной точкой) и непрерывные отображения, сохраняющие эту точку.
        }
    }
    \definition[Изоморфизм (изо) $\alpha: A \map B$]{
        Двусторонне обратимый морфизм: $\exists \beta: B \map A: \alpha \beta = \id_B, \beta\alpha = \id_A$.
    }
    \note{
        Как и в теории групп, если $\exists \beta, \beta': B \map A: \alpha\beta = \id_B, \beta'\alpha = \id_A$, то из ассоциативности $\beta = \beta'$.
    }
    \definition[Малая категория $\mathscr{C}$]{
        $\Obj\mathscr{C}$ --- множество.
    }
    \examples[Ещё категории]{
        \item \up \definition[Группоид]{Малая категория, в которой всякий морфизм --- изоморфизм.}
        Например, в топологическом пространстве можно ввести аналог фундаментальной группы --- \emph{фундаментальный группоид}, в котором пути --- стрелки из начала пути в конец пути.
        \item Пусть $\Gamma = (V, E)$ --- ориентированный граф.
        \bullets{
            \item $\mathscr{P}_\Gamma$ --- категория путей в $\Gamma$, для $x, y \in V: \Mor_{\mathscr{P}_\Gamma}(x, y)$ --- пути из $x$ в $y$.
            Композиция путей --- конкатенация.
            \item Категория достижимости $\mathscr{C}_\Gamma$. Для $x, y \in V: |\Mor_{\mathscr{C}_\Gamma}(x, y)| = \all{1,&x \cdots \rightarrow y \\ 0,& y\text{ недостижим из }x}$.
        }
        \item Пусть $(X, \le)$ --- частично упорядоченное множество, poset.
        Определим индексирующую категорию $\mathscr{C}_X$. $\Obj\mathscr{C}_X = X, |\Mor_{\mathscr{C}_X}(x, y)| = \all{1,&x \le  y \\ 0,& \text{иначе}}$
        \item Категория матриц $\mathscr{M}$ (над кольцом $R$ с единицей).
        $\Obj\mathscr{M} = \N$. $\Mor_\mathscr{M}(m, n) = M_{n \times m}(R)$.
        Композиция в данной категории --- умножение матриц:
        \begin{align*}
            \Mor(m, n) \times \Mor(k, m) &\map \Mor(k, n) \\ M_{n \times m}(R) \times M_{m \times k}(R) &\map M_{n \times k}(R)\\x, y &\mapsto xy
        \end{align*}
        Как будет видно позже~(\ref{matrices-and-vector-spaces}), эта категория эквивалентна категории конечномерных векторных пространств.
        \item Категория стрелок. Пусть $\mathscr{C}$ --- категория, тогда $\mathscr{Arr}\mathscr{C}$ --- тоже категория.
        $\Obj\mathscr{Arr}\mathscr{C} = \Mor\mathscr{C}$. Пусть $\alpha: A \map B, \beta: C \map D$.
        Тогда $\Mor_{\mathscr{Arr}\mathscr{C}}(\alpha, \beta) = \defset{(\phi, \psi)}{\phi: A \map C, \psi: B \map D, \psi\alpha = \beta\psi}$
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJEIl0sWzAsMiwiXFxwaGkiXSxbMSwzLCJcXHBzaSJdLFswLDEsIlxcYWxwaGEiXSxbMiwzLCJcXGJldGEiXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& D
              \arrow["\phi", from=1-1, to=2-1]
              \arrow["\psi", from=1-2, to=2-2]
              \arrow["\alpha", from=1-1, to=1-2]
              \arrow["\beta", from=2-1, to=2-2]
        \end{tikzcd}\]
        \item Пусть $\Gamma = (V, E)$ --- ориентированный граф, $\mathscr{C}$ --- категория.

        Определим категорию диаграмм в типе $\Gamma$ в категории $\mathscr{C}$ $\mathscr{D}_\mathscr{C}^\Gamma$.

        Предыдущий пример --- данный пример для графа $\Gamma$ следующего вида: $\begin{tikzcd}[ampersand replacement=\&]
                                                                                     \bullet \& \bullet\arrow[from=1-1, to=1-2]
        \end{tikzcd}$

        Формально $\Obj \mathscr{D}_\mathscr{C}^\Gamma = \defset{(f_o, f_m)}{f_o: V \map \Obj\mathscr{C}, f_m: E \map \Mor\mathscr{C}}$, причём стрелки согласованы: $\forall x \in E: f_o(\source(x)) = \source(f_m(x))$ и $f_o(\target(x)) = \target(f_m(x))$.

        $\Mor\mathscr{D}_\mathscr{C}^\Gamma\Big((f_o, f_m), (g_o, g_m)\Big) = \defset{\phi: V \map \Mor\mathscr{C}}{\phi(x) \in \Mor_\mathscr{C}(f_o(x), g_o(x))}$, причём морфизмами являются только те $\phi$, что $\forall (x, y) \in E$ диаграмма ниже коммутативна:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJmX28oeCkiXSxbMSwwLCJmX28oeSkiXSxbMCwxLCJnX28oeCkiXSxbMSwxLCJnX28oeSkiXSxbMCwyLCJcXHBoaSh4KSJdLFsxLDMsIlxccGhpKHkpIl0sWzAsMSwiZl9tKCh4LCB5KSkiXSxbMiwzLCJnX20oKHgsIHkpKSJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&,column sep=large,row sep=large]
        {f_o(x)}
              \& {f_o(y)} \\
              {g_o(x)} \& {g_o(y)}
              \arrow["{\phi(x)}", from=1-1, to=2-1]
              \arrow["{\phi(y)}", from=1-2, to=2-2]
              \arrow["{f_m((x, y))}", from=1-1, to=1-2]
              \arrow["{g_m((x, y))}", from=2-1, to=2-2]
        \end{tikzcd}\]

        Например, для графа $\begin{tikzcd}[ampersand replacement=\&]
                                 \bullet \& \bullet \\
                                 \bullet \& \bullet
                                 \arrow[from=1-1, to=1-2]
                                 \arrow[from=1-2, to=2-2]
                                 \arrow[from=1-1, to=2-1]
                                 \arrow[from=2-1, to=2-2]
        \end{tikzcd}$ объекты --- это диаграммы вида $\begin{tikzcd}[ampersand replacement=\&]
                                                          A \& B \\
                                                          C \& D
                                                          \arrow["\alpha", from=1-1, to=1-2]
                                                          \arrow["\delta"', from=2-1, to=2-2]
                                                          \arrow["\gamma"', from=1-1, to=2-1]
                                                          \arrow["\beta", from=1-2, to=2-2]
        \end{tikzcd}$, а морфизмы --- это диаграммы вида
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJEIl0sWzIsMSwiQSciXSxbMiwyLCJDJyJdLFszLDEsIkInIl0sWzMsMiwiRCciXSxbMCwxLCJcXGFscGhhIl0sWzIsMywiXFxkZWx0YSIsMl0sWzAsMiwiXFxnYW1tYSIsMl0sWzEsMywiXFxiZXRhIl0sWzQsNSwiXFxnYW1tYSciLDJdLFs0LDYsIlxcYWxwaGEnIl0sWzUsNywiXFxkZWx0YSciLDJdLFs2LDcsIlxcYmV0YSciXSxbMCw0LCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSw2LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiw1LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMyw3LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& D \& {A'} \& {B'} \\
              \&\& {C'} \& {D'}
              \arrow["\alpha", from=1-1, to=1-2]
              \arrow["\delta"', from=2-1, to=2-2]
              \arrow["\gamma"', from=1-1, to=2-1]
              \arrow["\beta", from=1-2, to=2-2]
              \arrow["{\gamma'}"', from=2-3, to=3-3]
              \arrow["{\alpha'}", from=2-3, to=2-4]
              \arrow["{\delta'}"', from=3-3, to=3-4]
              \arrow["{\beta'}", from=2-4, to=3-4]
              \arrow[dashed, from=1-1, to=2-3]
              \arrow[dashed, from=1-2, to=2-4]
              \arrow[dashed, from=2-1, to=3-3]
              \arrow[dashed, from=2-2, to=3-4]
        \end{tikzcd}\]
        Стоит обратить внимание, что так как $\cat{D}_\cat{C}^\Gamma$ --- категория всех диаграмм, а не только коммутативных, то не весь параллелепипед выше коммутативен.
        В связи с этим удобнее рассматривать категорию коммутативных диаграмм, где объектами являются не просто диаграммы, а коммутативные диаграммы.
    }
    \newlection{16 ноября 2023 г.}


    \section{Универсальные объекты}
    Пусть $\mathscr{C}$ --- категория, $I, F \in \mathscr{C}$.
    \definition[$I$ --- инициальный объект]{
        Для любого $A \in \mathscr{C}: \abs{\Mor(I, A)} = 1$.
    }
    \definition[$F$ --- финальный (терминальный) объект]{
        Для любого $A \in \mathscr{C}: {\abs{\Mor(A, F)} = 1}$.
    }
    \examples{
        \item В множествах инициальный --- пустое, финальный --- одноэлементное.
        \item В $\mathscr{Group}$ тривиальная группа одновременно является и инициальным, и терминальным объектами.
        \definition[Нулевой объект]{Одновременно финальный и инициальный объект.}
        \item В категории полей таких объектов нет (гомоморфизм полей сохраняет характеристику, и вообще всякий гомоморфизм полей инъективен).
        \item В $\mathscr{CRing}$ инициальный объект --- $\Z$, финальный объект --- нулевое кольцо (кольцо, в котором 0 = 1).
        \item В категории $F$-алгебр с отмеченной точкой финальный объект --- $(\{0\}, 0)$, а инициальный объект побольше --- $(F[x], x)$.
        В самом деле, из инициального объекта должна вести (единственная) стрелка в любой другой объект, и данная стрелка должна однозначно определяться образами отмеченной точки и единицы.
    }
    Вспомним универсальное свойство локализации:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSIl0sWzEsMCwiU157LTF9UiJdLFsxLDEsIkEiXSxbMCwyLCJcXGZvcmFsbCBcXHBzaSIsMl0sWzAsMSwiXFxwaGkiXSxbMSwyLCJcXGV4aXN0cyAhXFx0aGV0YSJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          R \& {S^{-1}R} \\
          \& A
          \arrow["{\forall \psi}"', from=1-1, to=2-2]
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["{\exists !\theta}", from=1-2, to=2-2]
    \end{tikzcd}\]
    $\forall \psi: R \map A$, такого, что $\psi(S) \subset A^*: \exists ! \theta: S^{-1}R \map A$, такой, что диаграмма коммутативна.

    Этому соответствует инициальный объект в категории $\mathscr{C}$, такой, что $\Obj\mathscr{C} = \defset{\phi: R \map A}{\phi(S) \subset A^*}$ и $\Mor_\mathscr{C}(\phi, \psi) = \defset{\alpha: A \map B}{\alpha \phi = \psi}$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSIl0sWzEsMCwiQSJdLFsxLDEsIkIiXSxbMCwyLCJcXHBzaSIsMl0sWzAsMSwiXFxwaGkiXSxbMSwyLCJcXGFscGhhIl1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          R \& A \\
          \& B
          \arrow["\psi"', from=1-1, to=2-2]
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["\alpha", from=1-2, to=2-2]
    \end{tikzcd}\]
    Вообще, всякий объект с универсальным свойством --- инициальный или финальный в некоторой категории, но для этого именно нужна \textbf{уни}версальность --- так, у алгебраического замыкания есть нетривиальные изоморфизмы, оно единственно с точностью до не единственного изоморфизма.

    Будем говорить, что объект \emph{единственен}, если он определён единственным образом с точностью до единственного изоморфизма.
    \proposal{
        Инициальный объект единственен (если существует).
        \provehere{
            Пусть $I, I'$ --- два инициальных объекта. $\Mor(I, I') = \{\alpha\}, \Mor(I', I) = \{\beta\}$, $\alpha\beta \in \Mor(I', I')$, и из инициальности $I': \alpha\beta = \id_{I'}$.

            Аналогично $\beta\alpha = \id_I$.
        }
    }


    \section{Функторы и не только}

    \subsection{Противоположная категория}
    Пусть $\mathscr{C}$ --- категория, тогда $\mathscr{C}^{\text{op}}$ --- \emph{противоположная категория}:
    \gather{\Obj\mathscr{C}^{\text{op}} = \Obj\mathscr{C}\qquad\forall A, B \in \mathscr{C}^{\text{op}}: \Mor_{\mathscr{C}^{\text{op}}}(A, B) = \Mor_{\mathscr{C}}(B, A)\\\alpha \underset{\mathscr{C}}\cdot \beta = \beta \underset{\mathscr{C}^{\text{op}}}\cdot \alpha}
    Неформально говоря, это категория с развёрнутыми стрелками.

    Всякому утверждению соответствует двойственное, и, например, доказав, что инициальный объект единственен, мы автоматически доказали единственность и финального объекта.

    \subsection{Декартово произведение категорий}
    Пусть $\mathscr{B}, \mathscr{C}$ --- категории.

    \definition[Декартово произведение категорий $\mathscr{B}\times\mathscr{C}$]{
        $\Obj(\mathscr{B}\times\mathscr{C}) = \Obj(\mathscr{B})\times\Obj(\mathscr{C})$, $\Mor_{\mathscr{B}\times\mathscr{C}}((B, C), (B', C')) = \Mor_\mathscr{B}(B, B') \times \Mor_\mathscr{C}(C, C')$.
        $(\alpha, \beta)(\alpha', \beta') = (\alpha\alpha', \beta\beta')$.
    }

    \subsection{Мономорфизмы и эпиморфизмы}
    Определим аналоги инъекции и сюръекции.
    Инъекция не склеивает точки, но в категориях у объектов нет точек, поэтому надо пойти другим путём.
    \definition[Мономорфизм (моно)]{Морфизм $\alpha$, такой, что его можно сокращать слева: $\forall \phi, \psi: \alpha\phi = \alpha \psi \then \phi = \psi$.
    Имеется в виду, что данное свойство выполняется для всех $\phi, \psi$, таких, что $\alpha\phi$ и $\alpha\psi$ определены.}
    Иными словами, мономорфность $\alpha$ означает, что коммутативность диаграммы ниже влечёт $\phi = \psi$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzIsMCwiXFxidWxsZXQiXSxbMCwxLCJcXHBoaSIsMCx7Im9mZnNldCI6LTF9XSxbMCwxLCJcXHBzaSIsMix7Im9mZnNldCI6MX1dLFsxLDIsIlxcYWxwaGEiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          \bullet \& \bullet \& \bullet
          \arrow["\phi", shift left, from=1-1, to=1-2]
          \arrow["\psi"', shift right, from=1-1, to=1-2]
          \arrow["\alpha", from=1-2, to=1-3]
    \end{tikzcd}\]
    \note{
        Диаграмма с кратными стрелками называется коммутативной, если композиция любых двух (или более) стрелок совпадает, но кратные стрелки не обязаны быть равны друг другу.
    }
    Двойственно, морфизм называется \emph{эпиморфизмом (эпи)}, если на него можно сокращать справа.

    В конкретных категориях совсем не обязательно мономорфизмы --- инъективны (хотя это довольно часто), эпиморфимзы --- сюръективны (что уже видно из примеров ниже).

    Однако всегда инъекции --- моно, сюръекции --- эпи.
    \examples{
        \item В $\mathscr{Set}$ мономорфизмы и инъекции совпадают, также как и эпиморфизмы и сюръекции.
        \item В категории $\mathscr{Group}$ мономорфизмы и инъекции тоже совпадают:
    % https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXFoiXSxbMCwwLCJHIl0sWzEsMCwiSCJdLFsxLDIsIlxcYWxwaGEiXSxbMCwxLCIxIFxcbWFwc3RvIHgiLDAseyJvZmZzZXQiOi0yfV0sWzAsMSwiMSBcXG1hcHN0byB5IiwyLHsib2Zmc2V0IjoyfV0sWzAsMiwiXFxhbHBoYSh4KSA9IFxcYWxwaGEoeSkiLDIseyJjdXJ2ZSI6Mn1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              G \& H \\
              \Z
              \arrow["\alpha", from=1-1, to=1-2]
              \arrow["{1 \mapsto x}", shift left=2, from=2-1, to=1-1]
              \arrow["{1 \mapsto y}"', shift right=2, from=2-1, to=1-1]
              \arrow["{\alpha(x) = \alpha(y)}"', curve={height=12pt}, from=2-1, to=1-2]
        \end{tikzcd}\]
        Чтобы проверить, что $\alpha$ --- инъекция, рассмотрим две стрелки $\Z \map G$, отправляющие $1$ в два разных элемента $x, y \in G$.
        Если $\alpha$ уравнивает все такие стрелки, то есть $\alpha(x) = \alpha(y)$ всегда влечёт $x = y$, то $\alpha$ --- правда инъекция.
        \item В $\mathscr{CRing}$ вложение $\Z \hookrightarrow \Q$ --- очевидно, не сюръекция, хотя и эпиморфизм: в композиции $\begin{tikzcd}[ampersand replacement=\&]
                                                                                                                                    \Z \& \Q \& R
                                                                                                                                    \arrow[hook, from=1-1, to=1-2]
                                                                                                                                    \arrow[shift left, from=1-2, to=1-3]
                                                                                                                                    \arrow[shift right, from=1-2, to=1-3]
                                                                                                                                    \arrow[curve={height=18pt}, from=1-1, to=1-3]
        \end{tikzcd}$ всякий морфизм из $\Z$ или из $\Q$ однозначно определяется образом единицы.

        Любая локализация --- эпиморфизм, и вообще бывают ещё эпиморфизмы, не являющиеся композицией сюръекции и локализации, но построить их непросто.
        \item В $\mathscr{Group}$ эпиморфизмы --- сюръекции.
        \provehere[Идея доказательства]{
            Всякий морфизм в $\mathscr{Group}$ разложим в композицию эпиморфизма (морфизма на образ) и мономорфизма (вложения образа).
            Тогда если нашёлся несюръективный эпиморфизм, то найдётся вложение в $H \hookrightarrow G$, являющаяся эпиморфизмом (при $H \lneq G$).

            Рассмотрим амальгамированное произведение $G \underset{H}* G$, оно определено в следующем абзаце.

            Рассмотрим две изомрфные копии $G: \hat{G} \cong \overline{G} \cong G$, такие, что $\hat{G} \cap \overline{G} = H$.
            Амальгамированное произведение $\hat{G} \underset{H}* \overline{G}$ состоит из всевозможных слов $\hat{g}_1 \overline{g}_1 \hat{g}_2 \overline{g}_2 \proddots \hat{g}_n \overline{g}_n$, где $\hat{g}_i \in \hat{G}, \overline{g}_i \in \overline{G}$.
            Ещё надо добавить соотношения $\all{(\hat{g}h) \cdot (h^{-1}\overline{g}) \sim \hat{g}\cdot\overline{g}\\\hat{g}_1 \cdot 1_{\overline{G}}\cdot \hat{g}_2 = \hat{g}_1\cdot \hat{g}_2 \\ \overline{g}_1 \cdot1_{\hat{G}} \cdot\overline{g}_2 = \overline{g}_1\cdot \overline{g}_2}$, где $\hat{g}, \hat{g}_1, \hat{g}_2 \in G, \overline{g}, \overline{g}_1, \overline{g}_2 \in \overline{G}, h \in H$ и отфакторизовать по их нормальному замыканию.
            Если $H = \{1\}$, то $\hat{G} \underset{H}* \overline{G}$ --- свободное произведение.
            Далее надо доказать, что если $\hat{g} \in \hat{G} \sm H, \overline{g} \in \overline{G} \sm H$, то элементы $\hat{g}, \overline{g} \in \hat{G} \underset{H}* \overline{G}$ не равны.
            Если это доказано, то далее видим, что при $H \lneq G$ нарушается определение эпиморфизма:
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJIIl0sWzEsMCwiRyJdLFsyLDAsIkdfMSBcXHVuZGVyc2V0e0h9KiBHXzIiXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsxLDIsImcgXFxtYXBzdG8gXFxvdmVybGluZXtnfSIsMix7Im9mZnNldCI6MX1dLFsxLDIsImcgXFxtYXBzdG8gXFxoYXR7Z30iLDAseyJvZmZzZXQiOi0xfV0sWzAsMiwiIiwyLHsiY3VydmUiOjN9XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  H \& G \& {G_1 \underset{H}* G_2}
                  \arrow[hook, from=1-1, to=1-2]
                  \arrow["{g \mapsto \overline{g}}"', shift right, from=1-2, to=1-3]
                  \arrow["{g \mapsto \hat{g}}", shift left, from=1-2, to=1-3]
                  \arrow[curve={height=18pt}, from=1-1, to=1-3]
            \end{tikzcd}\]
        }
        \item В категории метрических пространств отображения с плотным образом --- эпиморфизмы.
        В любом хаусдорфовом пространстве это тоже так (но только первой аксиомы отделимости недостаточно).
    }

    \subsection{(Ковариантные) функторы}
    \definition[(Ковариантный) функтор между категориями $\mathscr{B}$ и $\mathscr{C}$ $\cat{F}: \mathscr{B} \map \mathscr{C}$] {\label{functor}Класс отображений
    \bullets{
        \item $\cat{F}: \Obj\mathscr{B} \map \Obj\mathscr{C}$.
        \item $\forall X, Y \in \mathscr{B}$: $\cat{F}_{X,Y}: \Mor_\mathscr{B}(X, Y) \map \Mor_{\mathscr{C}}(\cat{F}(X), \cat{F}(Y))$.
    }
    причём отображения должны сохранять композицию и единицу (второе условие обязательно, например, в категории из одного элемента --- моноиде --- очевидно недостаточно требовать только сохранения композиции, единица априори не сохранится).}
    \definition[Строгий функтор $\cat{F}$]{
        $\forall X, Y \in \mathscr{B}: \cat{F}_{X,Y}$ инъективно.
    }
    \definition[Полный функтор $\cat{F}$]{
        $\forall X, Y \in \mathscr{B}: \cat{F}_{X,Y}$ сюръективно.
    }
    \note{
        Теория категорий --- не об объектах, а о морфизмах между ними (хотя часто, допуская вольность речи, говорят только про объекты, считая, что поведение на морфизмах очевидно).

        Важно, как функторы ведут себя на морфизмах, изоморфные объекты могут склеиваться, или наоборот, у объекта может возникнуть изоморфная копия, и это не должно менять строгость или полноту функтора.
    }
    \examples[Функторы]{
        \item Забывающие функторы --- забывают часть структуры.
        \bullets{
            \item Любая конкретная категория отображается в $\mathscr{Set}$.
            Например, $\mathscr{Group} \map \mathscr{Set}$ --- строгий функтор.
            \item $\mathscr{Rng} \map \mathscr{Ab}$ --- сопоставляем кольцу его аддитивную группу, строгий функтор.
            \item $\mathscr{Rng} \map \mathscr{Mon}$ --- сопоставляем кольцу его мультипликативный моноид, строгий функтор.
        }
        \item $GL_n: \mathscr{Ring} \map \mathscr{Group}, R \mapsto GL_n(R)$. Это опять задание функтора на объектах, но морфизмах его надо продолжить интуитивным образом.

        Формально, для $\phi: R \map S$ надо задать $(GL_n)_{R, S}(\phi): GL_n(R) \map GL_n(S)$. $\forall a \in GL_n(R): (GL_n)_{R,S}(a)_{i,j} = \phi(a_{i,j})$. Далее надо проверить, что $(GL_n)_{R,S}(\phi)$ (часто его обозначают той же буквой $\phi$) --- гомоморфизм групп.
    }

    \subsection{Контравариантные функторы}
    Контравариантный функтор обращает стрелки.
    \definition[Контравариантный функтор $\cat{F}: \mathscr{B} \map \mathscr{C}$]{Функтор $\mathscr{B}^\text{op} \map \mathscr{C}$.}
    Несложно проверить, что такие функторы взаимно однозначно соответствуют функторам $\mathscr{B} \map \mathscr{C}^\text{op}$.

    В частности, $\forall X, Y \in \mathscr{B}: \cat{F}_{X,Y}: \Mor(Y, X) \map \Mor(\cat{F}(x), \cat{F}(y))$.

    Согласно этому определению, контравариантный функтор не является функтором.
    \example{
        Пусть $\mathscr{C}$ --- категория с объектом $X \in \mathscr{C}$.
        Зададим функтор % https://q.uiver.app/#q=WzAsMTAsWzEsMCwiXFxjYXRDIl0sWzIsMCwiXFxjYXR7U2V0fSJdLFswLDAsIlxcTW9yKFxcXywgWCk6ICJdLFsxLDEsIlkiXSxbMiwxLCJcXE1vcihZLCBYKSJdLFsxLDIsIlxccGhpIl0sWzIsMiwiXFxNb3IoXFxwaGksIFgpOiAiXSxbMywyLCJcXGFycntjfXtcXE1vcihZJywgWCkgXFxtYXAgXFxNb3IoWSwgWCkgXFxcXCBcXGFscGhhIFxcbWFwc3RvIFxcYWxwaGEgXFxwaGl9Il0sWzQsMSwiXFx0ZXh0e9C00LvRjyAkWSBcXGluIFxcT2JqXFxjYXRDJH0iXSxbNCwyLCJcXHRleHR70LTQu9GPICRcXHBoaSBcXGluIFxcTW9yX1xcY2F0QyhZLCBZJykkfSJdLFswLDFdLFszLDQsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&,row sep=tiny]
        {\Mor(\_, X): }
              \& \cat{C} \& {\cat{Set}} \\
              \& Y \& {\Mor(Y, X)} \&\& {\text{для $Y \in \Obj\cat{C}$}} \\
              \& \phi \& {\Mor(\phi, X): } \& {\arr{c}{\Mor(Y', X) \map \Mor(Y, X) \\ \alpha \mapsto \alpha \phi}} \& {\text{для $\phi \in \Mor_\cat{C}(Y, Y')$}}
              \arrow[from=1-2, to=1-3]
              \arrow[maps to, from=2-2, to=2-3]
              \arrow[maps to, from=3-2, to=3-3]
        \end{tikzcd}\]
        Функтор $\Mor(\_, X)$ особо опасен (например, он контравариантен), с ним стоит обращаться с чрезвычайной осторожностью.
    }
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJZIl0sWzAsMSwiWSciXSxbMSwwLCJcXE1vcl9cXGNhdHtDfShZLCBYKSJdLFsxLDEsIlxcTW9yX1xcY2F0e0N9KFknLCBYKSJdLFswLDEsIlxccGhpIiwyXSxbMSwzXSxbMCwyXSxbMywyLCJcXF8gXFxjaXJjIFxccGhpIiwyXSxbNCw3LCIiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MTAsInRhcmdldCI6MTB9LCJsZXZlbCI6MSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          Y \& {\Mor_\cat{C}(Y, X)} \\
          {Y'} \& {\Mor_\cat{C}(Y', X)}
          \arrow[""{name=0, anchor=center, inner sep=0}, "\phi"', from=1-1, to=2-1]
          \arrow[from=2-1, to=2-2]
          \arrow[from=1-1, to=1-2]
          \arrow[""{name=1, anchor=center, inner sep=0}, "{\_ \circ \phi}"', from=2-2, to=1-2]
          \arrow[shorten <=5pt, shorten >=5pt, maps to, from=0, to=1]
    \end{tikzcd}\]
    \newlection{21 ноября 2023 г.}
    Можно рассмотреть ковариантную версию: функтор $\Mor_\cat{C}(X, \_)$.
    \[\Mor_\cat{C}(X, \_): \phi \mapsto [\alpha \mapsto \phi\alpha]\]
    Наконец, можно рассмотреть функтор $\Mor(\_, \_): \cat{C}^\text{op} \times \cat{C} \map \cat{Set}$.
    \examples[Не функторы]{
        \item Рассмотрим отображение $\cat{Center}: \cat{Group} \map \cat{Group}$, сопоставляющее группе её центр.
        Это не функтор, так как при гомоморфизмах центр необязательно отображается в центр.

        Например, рассмотрим полупрямое произведение $C_2 \rightthreetimes C_3 \cong S_3$. Ему соответствует композиция
        \[C_2 \hookrightarrow S_3 \twoheadrightarrow C_2\]
        Функтор взятия центра отобразит эту цепочку в $C_2 \map \{1\} \map C_2$, причём композиция --- $\id$, но $\id$ не может пропускаться через $\{1\}$
        \item $\Aut: \cat{C} \map \cat{Group}, A \mapsto \Aut(A)$ --- снова не функтор, просто непонятно, как определить его на морфизмах.
        Нет разумного способа сопоставить морфизмам $A \map B$ и $ A\map A$ морфизм $B \map B$.
    }
    \examples{
        \item Сопоставление группе коммутанта --- функтор.
        \[\cat{D}: \cat{Group} \map \cat{Group}\]
        Пусть $\phi: G \map H$. Функтор определён так:
        $\cat{D}(G) = [G, G], \cat{D}(\phi): [D, D] \map [H, H]$ --- сужение.
        \item Абелианизация тоже является функтором. $\ab: \cat{Group} \map \cat{Group}, \ab(G) = G^{\ab} = G/[G,G]$.
    %https://q.uiver.app/#q=WzAsNCxbMCwwLCJHIl0sWzEsMCwiSCJdLFsyLDAsIkheXFxhYiJdLFsxLDEsIkdee1xcYWJ9Il0sWzAsM10sWzMsMiwiXFxhYihcXHBoaSkiLDJdLFswLDEsIlxccGhpIl0sWzEsMl1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              G \& H \& {H^{\ab}} \\
              \& {G^{\ab}}
              \arrow[from=1-1, to=2-2]
              \arrow["{\ab(\phi)}"', from=2-2, to=1-3]
              \arrow["\phi", from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
        \end{tikzcd}\]
        Отображение в абелеву группу содержит коммутант в ядре, поэтому $\phi: G \map H$ можно пропустить через фактор, и назвать $\ab(\phi)$
        \item \textbf{Категория всех категорий}.

        Категорию совсем всех категорий рассмотреть не получится, так как класс всех классов не определён.

        Вместо этого рассмотрим категорию всех малых категорий $\cat{Cat}$.
        Морфизмами в ней являются функторы.

        \item Категория диаграмм в $\cat{C}$ типа $\Gamma$, которая была рассмотрена ранее --- это функторы из путей $\mathcal{P}_\Gamma$ в графе в $\cat{C}$:
        \[\cat{D}_\Gamma(\cat{C}) = \Func(\mathcal{P}_\Gamma, \cat{C})\]
        \item Функторы из категории достижимости в $\cat{C}$ $\Func(\mathcal{C}_\Gamma, \cat{C})$ --- класс коммутативных диаграмм в $\cat{C}$.
        Например, если $\Gamma$ --- такой граф $\begin{tikzcd}[ampersand replacement=\&]
                                                    A \& B \\
                                                    C \& D
                                                    \arrow[from=1-1, to=2-1]
                                                    \arrow[from=1-1, to=1-2]
                                                    \arrow[from=1-2, to=2-2]
                                                    \arrow[from=2-1, to=2-2]
        \end{tikzcd}$, то $|\Mor(A, D)| = 1$, поэтому функтор должен перевести стрелки $A \map B \map D$ и $A \map C \map D$ с равной композицией в стрелки с равной композицией.

        Превратим её в категорию коммутативных диаграмм.
        Для этого надо ввести морфизмы между коммутативными диаграммами.
    }


    \section{Естественные преобразования}
    \begin{flushright}{<<Всё естественно, что не безобразно>>}\end{flushright}
    Пусть $\cat{F}, \cat{G}: \cat{B} \map \cat{C}$ --- два функтора.
    Категорию $\cat{B}$ здесь стоит воспринимать, как \emph{индексирующую категорию}, как граф, по которому строится категория диаграмм.

    \emph{Естественное преобразование} $\eta: \cat{F} \map \cat{G}$ --- класс морфизмов, $\eta_B: \cat{F}(B) \map \cat{G}(B)$, где $B \in \cat{B}$, такой, что $\forall \phi \in \Mor_\cat{B}(A, B)$ диаграмма коммутирует.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNhdHtGfShBKSJdLFsxLDAsIlxcY2F0e0Z9KEIpIl0sWzAsMSwiXFxjYXR7R30oQSkiXSxbMSwxLCJcXGNhdHtHfShCKSJdLFswLDEsIlxcY2F0e0Z9KFxccGhpKSJdLFsyLDMsIlxcY2F0e0d9KFxccGhpKSJdLFswLDIsIlxcZXRhX0EiLDJdLFsxLDMsIlxcZXRhX0IiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\cat{F}(A)}
          \& {\cat{F}(B)} \\
          {\cat{G}(A)} \& {\cat{G}(B)}
          \arrow["{\cat{F}(\phi)}", from=1-1, to=1-2]
          \arrow["{\cat{G}(\phi)}", from=2-1, to=2-2]
          \arrow["{\eta_A}"', from=1-1, to=2-1]
          \arrow["{\eta_B}", from=1-2, to=2-2]
    \end{tikzcd}\]

    \examples[Естественные преобразования]{
        \item Определитель $\det_n: GL_n \map GL_1$. ($GL_1(R) \cong R^*$.)
        В данном случае $GL_n, GL_1: \cat{CRing} \map \cat{Group}$, проверим, что $\forall A, B \in \cat{CRing}$.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJHTF9uKEEpIl0sWzEsMCwiR0xfbihCKSJdLFswLDEsIkdMXzEoQSkiXSxbMSwxLCJHTF8xKEIpIl0sWzAsMSwiXFxwaGkiXSxbMiwzLCJcXHBoaSJdLFswLDIsIlxcZGV0IiwyXSxbMSwzLCJcXGRldCJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {GL_n(A)}
              \& {GL_n(B)} \\
              {GL_1(A)} \& {GL_1(B)}
              \arrow["\phi", from=1-1, to=1-2]
              \arrow["\phi", from=2-1, to=2-2]
              \arrow["\det"', from=1-1, to=2-1]
              \arrow["\det", from=1-2, to=2-2]
        \end{tikzcd}\]
        Естественность означает $\phi(\det(a)) = \det(\phi(a))$, что верно, так как $\det$ --- многочлен от коэффициентов, а $\phi$ --- гомоморфизм коэффициентов.
        \item Рассмотрим два функтора $\cat{M}$ и ${}^{*}: \cat{CRing} \map \cat{Mon}$, отображающие кольцо в моноид его элементов по умножению, и группу обратимых элементов (являющуюся моноидом) соответственно.
        $\eta: R^* \hookrightarrow \cat{M}(R)$.
        \item Вложение (?) --- естественное преобразование между коммутантом и тождественным отображением $\cat{D}, \id: \cat{Group}\map\cat{Group}$:
        \item\up\definition[Естественный изоморфизм]{Естественное преобразование, состоящее из изоморфизмов.}
        В категории множеств $\cat{Set}$: $\Mor(X, \Mor(Y, Z)) \leftrightarrow \Mor(X \times Y, Z)$: $g(x)(y) = f(x, y)$.

        Это стоит читать, как естественное преобразование между функторами $\Mor(\_, \Mor(\_, \_)): \cat{Set}^{\op} \times \cat{Set}^{\op} \times \cat{Set} \map \cat{Set}$ и $\Mor(\_ \times \_, \_)): \cat{Set}^{\op} \times \cat{Set}^{\op} \times \cat{Set} \map \cat{Set}$.
        \item Под естественным преобразованием $V \map V^{**}$ подразумевается естественное преобразование между функторам $\id$ и ${}^{**}$ действующих $\Lmod{F} \map \Lmod{F}$.

        Промежуточный функтор ${}^{*}$ --- контравариантен.

        $V^* \coloneqq \Mor_{\Lmod{F}}(V, F)$, значит, $V^{**} = \Mor_{\Lmod{F}}(\Mor_{\Lmod{F}}(V, F), F)$.
        Естественное преобразование сопоставляет функционалу $\phi \in V^*$ и вектору $x \in V$ их каноническое спаривание $\eps_x(f) = \phi(x) = \angles{\phi|x}$.

        Это преобразование не является изоморфизмом даже для счётномерных векторных пространств --- для конечных полей легко проверить различие мощностей.

        Естественное преобразование $\eps: \id \map {}^{**}$ можно сузить на категорию $\cat{Vect}_F$ конечномерных векторных пространств, там оно является изоморфизмом в силу подсчёта размерностей.
    }
    \counterexample[Неестественное преобразование]{
        Изоморфизм конечномерного векторного пространства, и двойственного к нему.
    }
    Неформально, всякое преобразование, в котором не задействованы какие-то выборы, является естественным.

    Рассмотрим два функтора $\cat{F}, \cat{G}: \cat{B} \map \cat{C}$.
    Пусть имеется также функтор $\cat{H}: \cat{C} \map \cat A$, и естественное преобразование $\eta: \cat{F} \map \cat{G}$.

    Беря композицию функтора и естественного преобразования, получаем естественное преобразование $\cat{H}\eta = \cat{H}\circ \eta: \cat{H}\circ\cat{F} \map \cat{H} \circ \cat{G}$.

    Для объекта $B \in \mathscr{B}: (\cat{H}\eta)_B = \cat{H}(\eta_B): \cat{H}(\cat{F}(B)) \map \cat{H}(\cat{G}(B))$.

    Если же функтор определён так $\cat{H}: \cat A \map \cat{B}$, то можно задать естественное преобразование $\eta \cat{H}: \cat{F} \circ \cat H \map \cat{G} \circ \cat{H}$.
    Аналогично, $(\eta\cat H)_B = \eta_{\cat{H}(B)}$.
    \example{
        Рассмотрим естественные по $X$ и по $Y$ преобразования в категории $\Lmod{R}$, где $R$ --- коммутативное кольцо.
        \begin{align*}
            X^* \otimes Y &\map \Mor(X, Y) \\ \phi \otimes y_i &\mapsto [x \mapsto \phi(x)y_i]
        \end{align*}
        Иными словами, имеется естественное преобразование между функторами $\cat{F}(X, Y) = X^* \otimes Y$ и $\Mor$, которые действуют $\Lmod{R}^{\op} \times \Lmod{R} \map \Lmod{R}$.
        Если $R$ --- поле, и пространства --- конечномерны, то это естественный изоморфизм, назовём его $\eta$.

        Тогда если \[{\cat H: \cat{Vect}_F \map \cat{Vect}_F, W \mapsto \Mor(X, W)}\] то мы получаем новый естественный изоморфизм $\cat{H}\eta: \Mor(X, Y^* \otimes Z) \cong \Mor(X, \Mor(Y, Z))$.

        Совмещая с уже ранее полученным изоморфизмом $\Mor(X \otimes Y, Z) \cong \Mor(X, Y^* \otimes Z)$, получаем ещё один изоморфизм $\Mor(X \otimes Y, Z) \cong \Mor(X, \Mor(Y, Z))$, как композицию.
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXE1vcihYIFxcb3RpbWVzIFksIFopIl0sWzIsMCwiXFxNb3IoWCwgWV4qIFxcb3RpbWVzIFopIl0sWzEsMSwiXFxNb3IoWCwgXFxNb3IoWSwgWikpIl0sWzEsMiwiXFxjYXQgSFxcZXRhIl0sWzIsMCwiIiwyLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwyLCJcXHNpbSIsMyx7Im9mZnNldCI6LTMsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDEsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Mor(X \otimes Y, Z)} \&\& {\Mor(X, Y^* \otimes Z)} \\
        \& {\Mor(X, \Mor(Y, Z))}
        \arrow["{\cat H\eta}", from=1-3, to=2-2]
        \arrow[Rightarrow, no head, from=2-2, to=1-1]
        \arrow["\sim"{marking, allow upside down}, shift left=3, draw=none, from=1-1, to=2-2]
        \arrow[tail reversed, no head, from=1-1, to=1-3]
        \end{tikzcd}\]

    }
    \examples[Ещё естественные преобразования]{
        \item $R \otimes_R \_ \cong \id$, или иначе пишут $R \otimes_R M \cong M$ естественно по $M$.

        Элемент $\sum r_i \otimes m_i$ равен $1 \otimes \sum r_i m_i$, и отображается в $\sum r_i m_i$.
        \item $\Mor_{\Lmod{R}}(X, \Mor_{\Lmod{R}}(Y, Z)) \cong \text{Bi}_{\Lmod{R}}(X, Y; Z)\cong \Mor_{\Lmod{R}}(X \otimes_R Y, Z)$.
        \item Естественный изоморфизм в категории конечномерных векторных пространств $\cat{Vect}_F$: $\Mor(X, Y \otimes Z) \cong \Mor(X \otimes Z^*, Y)$.
    }
    \subsection{Эквивалентность категорий}
    Изоморфизм категорий помнит слишком много, мы не хотим следить за кратностью изоморфных объектов.

    \definition[Категории $\cat{B}$ и $\cat{C}$ эквивалентны]{
        Существуют функторы $\cat{F}: \cat{B} \map \cat{C}$ и $\cat{G}: \cat{C} \map \cat{B}$, такие, что $\cat{F}\circ\cat{G} \cong \id_\cat{C}$ и $\cat{G}\circ\cat{F} \cong \id_\cat{B}$, здесь $\cong$ --- естественный изоморфизм.
    }
    Ранее мы фактически доказали, что категории $\cat{Vect}_F$ и $\cat{Vect}_F^{\op}$ эквивалентны (но они не изоморфны).

    \newlection{23 ноября 2023 г.}
    \example{\label{matrices-and-vector-spaces}
    Рассмотрим категорию конечномерных векторных пространств $\cat{Vect}_F$ и категорию матриц $\cat{M}_F$.
    Идеологически правильнее рассматривать $\Obj \cat{M}_F$ не как натуральные числа, а как пространства столбцов.
    Определим \begin{align*}
                  \cat{F}: \cat{M}_F &\map \cat{Vect}_F\\ \N = \Obj\cat{M}_F \ni A & \mapsto F^n \\ \Mor(n, m) \ni A &\mapsto \text{оператор умножения на матрицу $A$}
    \end{align*}

        Далее чтобы доказать эквивалентность категорий, то надо либо уметь пользоваться аксиомой выбора для классов, либо каким-то образом сделать категорию $\cat{Vect}_F$ малой (которая пока не является множеством, но её объекты при фиксированном поле имеют фиксированную мощность, то есть идеологически не очень большие)
        Отображение в обратную сторону устроим так.
        В каждом векторном пространстве $V$ выберем базис $\angles{v_1, \dots, v_n}$, причём в каждом $F^n$ --- выберем стандартный базис, и обратное отображение устроим так:
        \begin{align*}
            \cat{G}: \cat{Vect}_F &\map \cat{M}_F \\ \cat{G}(V) &= \dim V \\ \cat{G}(\alpha) &= \text{матрица $\alpha$ в выбранном базисе}
        \end{align*}
        Композиция $\cat{G} \circ \cat{F}$ тождественна, а композиция $\cat{F} \circ \cat{G}$ не инъективна на объектах, но, тем не менее, естественно изоморфна тождественному.}
    \note{
        Ещё одним способом не пользоваться аксиомой выбора будет рассматривать вместо $\cat{Vect}_F$ категорию базированных векторных пространств --- векторных пространств, в которых заранее выбран базис.
    }
    \proposal{
        Рассмотрим функтор $\cat{F}: \cat{B} \map \cat{C}$. $\cat{F}$ является эквивалентностью категорий $\iff \cat{F}$ --- строгий, полный, \emph{квазиинъективный} (неизоморфные объекты отображаются в неизоморфные), и, наконец, \emph{квазисюръективный} ($\forall C \in \cat{C}: \exists B \in \cat{B}: \cat{F}(B) \cong C$).
    }


    \section{(Ко)эквалайзеры и (ко)пределы}
    Пусть $\phi, \psi: A \map B$
    \definition[Эквалайзер или уравнитель морфизмов $\phi, \psi$]{
        Морфизм $\eps: E \map A$, уравнивающий $\phi$ и $\psi$: $\phi\eps = \psi\eps$, причём такой, что $\forall \eps': E' \map A$ (такого, что $\phi\eps' = \psi\eps'$) $\exists! \alpha: E' \map E$, такая, что диаграмма коммутативна
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJFJyJdLFsxLDIsIlxccGhpIiwwLHsib2Zmc2V0IjotMX1dLFsxLDIsIlxccHNpIiwyLHsib2Zmc2V0IjoxfV0sWzAsMSwiXFxlcHMiXSxbMywxLCJcXGVwcyciLDJdLFszLDAsIlxcYWxwaGEiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              E \& A \& B \\
              {E'}
              \arrow["\phi", shift left, from=1-2, to=1-3]
              \arrow["\psi"', shift right, from=1-2, to=1-3]
              \arrow["\eps", from=1-1, to=1-2]
              \arrow["{\eps'}"', from=2-1, to=1-2]
              \arrow["\alpha", dashed, from=2-1, to=1-1]
        \end{tikzcd}\]
    }
    В $\cat{Set}$ эквалайзер $\phi, \psi: A \map B$ --- это вложение $E \hookrightarrow A$, где $E = \defset{a \in A}{\phi(a) = \psi(a)}$.

    В категории $\cat{D}$, такой, что $\Obj\cat{D} = \defset{(E, \eps)}{\phi\eps = \psi\eps}$, и $\Mor_\cat{D}((E', \eps'), (E, \eps)) = \defset{\alpha: E' \map E}{ \eps' = \eps\alpha}$ эквалайзер --- финальный объект в $\cat{D}(\phi, \psi)$.
    Это сразу показывает, что если уж эквалайзер сущестует, то он единственнен.

    Для определения коэквалайзера надо развернуть все стрелки:

    Пусть $A \leftarrow B: \phi, \psi$.
    \definition[Коэквалайзер]{
        Морфизм $\eps: A \map E$, уравнивающий $\phi$ и $\psi$: $\eps\phi = \eps\psi$, причём такой, что $\forall \eps': A \map E'$ (такого, что $\eps'\phi = \eps'\psi$) $\exists! \alpha: E \map E'$, такая, что диаграмма коммутативна
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJFJyJdLFsxLDIsIlxccGhpIiwwLHsib2Zmc2V0IjotMSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwyLCJcXHBzaSIsMix7Im9mZnNldCI6MSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwzLCJcXGFscGhhIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzEsMCwiXFxlcHMiLDJdLFsxLDMsIlxcZXBzJyJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              E \& A \& B \\
              {E'}
              \arrow["\phi", shift left, tail reversed, no head, from=1-2, to=1-3]
              \arrow["\psi"', shift right, tail reversed, no head, from=1-2, to=1-3]
              \arrow["\alpha"', dashed, from=1-1, to=2-1]
              \arrow["\eps"', from=1-2, to=1-1]
              \arrow["{\eps'}", from=1-2, to=2-1]
        \end{tikzcd}\]
    }
    В $\cat{Set}$ коэквалайзер $\phi, \psi: B \map A$ --- это факторизация $\eps: A \map A/_\sim$, где $\sim$ --- отношение эквивалентности, порождённое $\phi(b) \sim \psi(b)$.

    В $\cat{Group}$ коэквалайзер $\phi, \psi: G \map H$ --- это факторизация по нормальному замыканию $\{\phi(g)\psi(g^{-1})\}$.

    \proposal{
        Эквалайзеры --- мономорфизмы, коэквалайзеры --- эпиморфизмы.
        \provehere{
            Докажем, что эквалайзер --- мономорфизм, второе утверждение следует из двойственности.

            Рассмотрим $\eps$ --- эквалайзер $\phi$ и $\psi$, и пусть $\alpha, \beta: X \map E$ --- два отображения, таких, что $\eps\alpha = \eps\beta = \theta$.
            Чтобы проверить, что $\eps$ --- моно, по определению достаточно проверить, что тогда $\alpha = \beta$.
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJYIl0sWzEsMiwiXFxwaGkiLDAseyJvZmZzZXQiOi0xfV0sWzEsMiwiXFxwc2kiLDIseyJvZmZzZXQiOjF9XSxbMCwxLCJcXGVwcyJdLFszLDAsIlxcYWxwaGEiLDAseyJvZmZzZXQiOi0xfV0sWzMsMSwiXFx0aGV0YSIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDAsIlxcYmV0YSIsMix7Im9mZnNldCI6MX1dXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  E \& A \& B \\
                  X
                  \arrow["\phi", shift left, from=1-2, to=1-3]
                  \arrow["\psi"', shift right, from=1-2, to=1-3]
                  \arrow["\eps", from=1-1, to=1-2]
                  \arrow["\alpha", shift left, from=2-1, to=1-1]
                  \arrow["\theta"', dashed, from=2-1, to=1-2]
                  \arrow["\beta"', shift right, from=2-1, to=1-1]
            \end{tikzcd}\]
            Заметим, что $\phi\theta = \phi\eps\alpha = \psi\eps\alpha = \psi\theta$, то есть $\theta$ --- тоже уравнивает стрелки $\phi$ и $\psi$.

            Но по определению эквалайзера $\eps$ \textbf{уни}версален: существует и единственная стрелка $X \map E$ (оставляющая диаграмму коммутативной), значит, $\alpha = \beta$, то есть $\eps$ --- мономорфизм.
        }
    }
    \proposal{
        Эквалайзер, являющийся эпиморфизмом --- изоморфизм.
        \provehere{
            Пусть $\eps$ --- эквалайзер.
            Так как $\phi\eps = \psi\eps$, и $\eps$ --- эпиморфизм, то $\phi = \psi$. Но тогда $\id: A \map A$ --- тоже эквалайзер, и два эквалайзера отличаются на изоморфизм:
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJBIl0sWzEsMiwiXFxwaGkiLDAseyJvZmZzZXQiOi0xfV0sWzEsMiwiXFxwc2kiLDIseyJvZmZzZXQiOjF9XSxbMCwxLCJcXGVwcyJdLFszLDEsIlxcaWQiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywwLCJcXGVwcyIsMCx7Im9mZnNldCI6LTF9XSxbMCwzLCJcXGV4aXN0cyEiLDAseyJvZmZzZXQiOi0xLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  E \& A \& B \\
                  A
                  \arrow["\phi", shift left, from=1-2, to=1-3]
                  \arrow["\psi"', shift right, from=1-2, to=1-3]
                  \arrow["\eps", from=1-1, to=1-2]
                  \arrow["\id"', dashed, from=2-1, to=1-2]
                  \arrow["\eps", shift left, from=2-1, to=1-1]
                  \arrow["{\exists!}", shift left, dotted, from=1-1, to=2-1]
            \end{tikzcd}\]
        }
    }


    \section{Произведения и копроизведения}
    Зафиксируем $B, C \in \mathscr{C}$.
    \definition[Произведение $B$ и $C$]{
        Финальный объект в категории диаграмм $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                          A \& B \\
                                          C
                                          \arrow[from=1-1, to=2-1]
                                          \arrow[from=1-1, to=1-2]
        \end{tikzcd}$.
        Морфизмы в данной категории --- это стрелка $\phi$:
        % https://q.uiver.app/#q=WzAsNCxbMSwxLCJBIl0sWzIsMSwiQiJdLFsxLDIsIkMiXSxbMCwwLCJBJyJdLFswLDIsIlxcZ2FtbWEiXSxbMCwxLCJcXGJldGEiLDJdLFszLDAsIlxccGhpIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZG90dGVkIn19fV0sWzMsMSwiXFxiZXRhJyIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDIsIlxcZ2FtbWEnIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              {A'}
              \\
              \& A \& B \\
              \& C
              \arrow["\gamma", from=2-2, to=3-2]
              \arrow["\beta"', from=2-2, to=2-3]
              \arrow["\phi"{description}, dotted, from=1-1, to=2-2]
              \arrow["{\beta'}", dashed, from=1-1, to=2-3]
              \arrow["{\gamma'}"', dashed, from=1-1, to=3-2]
        \end{tikzcd}\]
        Произведение обозначается $B \times C$.
    }
    Иными словами, произведение $B \times C$ --- это объект $A$ \textbf{и} морфизмы $\beta: A \map B, \gamma: A \map C$, такие, что $\forall A' \in \Obj \cat{C}, \beta': A' \map B, \gamma': A' \map C$ $\exists! \phi: A' \map A: \beta\phi = \beta'$ и $\gamma\phi = \gamma'$.
    Часто допускают вольность речи, и говорят о произведении, как об объекте.

    Это такой объект, что $\forall A \in \cat C$: функторы $\cat{F}(A) \coloneqq \Mor(A, B) \times \Mor(A, C)$ и $\Mor(\_, B \times C)$ естественно изоморфны.

    Практически всегда в конкретных категориях произведение --- декартово произведение вместе с отображениями --- проекциями.

    Копроизведение --- двойственный объект к произведению.
    \examples[Копроизведение]{
        \item В $\cat{Set}$ копроизведение непересекающихся множеств --- это действительно дизъюнктное объединение.
        \item В $\cat{Group}$ копроизведение --- это свободное произведение групп.
        \item В $\cat{CRing}$ копроизведение --- это тензорное произведение над $\Z$.
        Умножение на разложимых тензорах задано в виде $(b \otimes c)(b' \otimes c') = bb' \otimes cc'$.
    }
    \newlection{28 ноября 2023 г.}


    \section{Универсальные и коуниверсальные квадраты}
    Зафиксируем морфизмы $\beta: B \map D$ и $\gamma: C \map D$, и рассмотрим коммутативные квадраты в категории $\cat{C}$.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJEIl0sWzAsMl0sWzAsMV0sWzEsMywiXFxiZXRhIl0sWzIsMywiXFxnYW1tYSJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          A \& B \\
          C \& D
          \arrow[from=1-1, to=2-1]
          \arrow[from=1-1, to=1-2]
          \arrow["\beta", from=1-2, to=2-2]
          \arrow["\gamma", from=2-1, to=2-2]
    \end{tikzcd}\]
    \definition[Pullback (пулбэк)]{
        Коммутативный квадрат выше, такой, что $\forall \begin{tikzcd}[ampersand replacement=\&]
                                                            A' \& B \\C \& D\arrow[from=1-1, to=2-1]\arrow[from=1-1, to=1-2]\arrow["\beta", from=1-2, to=2-2]\arrow["\gamma", from=2-1, to=2-2]
        \end{tikzcd}$: $\exists! A' \map A$, делающий диаграмму коммутативной:
        % https://q.uiver.app/#q=WzAsNSxbMSwxLCJBIl0sWzIsMSwiQiJdLFsxLDIsIkMiXSxbMiwyLCJEIl0sWzAsMCwiQSciXSxbMCwyXSxbMCwxXSxbMSwzLCJcXGJldGEiXSxbMiwzLCJcXGdhbW1hIl0sWzQsMiwiXFxmb3JhbGwiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNCwxLCJcXGZvcmFsbCIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs0LDAsIlxcZXhpc3RzISIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRvdHRlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {A'}
              \\
              \& A \& B \\
              \& C \& D
              \arrow[from=2-2, to=3-2]
              \arrow[from=2-2, to=2-3]
              \arrow["\beta", from=2-3, to=3-3]
              \arrow["\gamma", from=3-2, to=3-3]
              \arrow["\forall"', dashed, from=1-1, to=3-2]
              \arrow["\forall", dashed, from=1-1, to=2-3]
              \arrow["{\exists!}"{description}, dotted, from=1-1, to=2-2]
        \end{tikzcd}\]
    }
    Иными словами, это финальный объект в категории квадратов с фиксированными стрелками $\beta: B \map D, \gamma: C \map D$.
    Неформально (при зажёванных морфизмах) пишут $A = B \times_D C$.

    Объект $A$ (вместе со стрелками $A \map B, A \map C$) --- \emph{pullback} диаграммы $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                                                                             C \& D \& B\arrow["\gamma", from=1-1, to=1-2]\arrow["\beta"', from=1-3, to=1-2]
    \end{tikzcd}$.

    \proposal{
        Пусть в категории $\cat{C}$ существуют все произведения и эквалайзеры (или как минимум те, о которых речь ниже).

        Тогда $A$ --- pullback $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                    C \& D \& B\arrow["\gamma", from=1-1, to=1-2]\arrow["\beta"', from=1-3, to=1-2]
        \end{tikzcd}$ $\iff A$ --- эквалайзер пунктирных отображений.
    % https://q.uiver.app/#q=WzAsNixbMCwxLCJCXFx0aW1lcyBDIl0sWzEsMCwiQiJdLFsyLDEsIkQiXSxbMCwyLCJCIFxcdGltZXMgQyJdLFsyLDIsIkQiXSxbMSwzLCJDIl0sWzAsMSwiXFxwaV9CIl0sWzEsMiwiXFxiZXRhIl0sWzAsMiwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsNSwiXFxwaV9DIiwyXSxbNSw0LCJcXGdhbW1hIiwyXSxbMyw0LCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&,row sep=tiny]
              \& B \\
              {B\times C} \&\& D \\
              {B \times C} \&\& D \\
              \& C
              \arrow["{\pi_B}", from=2-1, to=1-2]
              \arrow["\beta", from=1-2, to=2-3]
              \arrow[dashed, from=2-1, to=2-3]
              \arrow["{\pi_C}"', from=3-1, to=4-2]
              \arrow["\gamma"', from=4-2, to=3-3]
              \arrow[dashed, from=3-1, to=3-3]
        \end{tikzcd}\]
        \provehere{
            Pullback --- финальный объект в некоторой категории, поэтому единственность доказывать не надо.
            Рассмотрим квадрат $\begin{tikzcd}[ampersand replacement=\&]
                                    A' \& B \\C \& D\arrow[from=1-1, to=2-1]\arrow[from=1-1, to=1-2]\arrow["\beta", from=1-2, to=2-2]\arrow["\gamma", from=2-1, to=2-2]
            \end{tikzcd}$.
            По универсальному свойству произведения % https://q.uiver.app/#q=WzAsNCxbMiwxLCJCIFxcdGltZXMgQyJdLFszLDAsIkIiXSxbMywyLCJDIl0sWzAsMSwiQSciXSxbMCwxLCJcXHBpX0IiLDJdLFswLDIsIlxccGlfQyJdLFszLDFdLFszLDJdLFszLDAsIlxcZXhpc3RzIVxccGhpIiwxLHsibGFiZWxfcG9zaXRpb24iOjcwLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
                  \&\&\& B \\
                  {A'} \&\& {B \times C} \\
                  \&\&\& C
                  \arrow["{\pi_B}"', from=2-3, to=1-4]
                  \arrow["{\pi_C}", from=2-3, to=3-4]
                  \arrow[from=2-1, to=1-4]
                  \arrow[from=2-1, to=3-4]
                  \arrow["{\exists!\phi}"{description, pos=0.7}, dashed, from=2-1, to=2-3]
            \end{tikzcd}\]
            Таким образом, имеется две композиции и уравнивающая стрелка:
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJBJyJdLFsxLDAsIkIgXFx0aW1lcyBDIl0sWzIsMCwiRCJdLFsxLDIsIlxcYmV0YVxccGlfQiIsMCx7Im9mZnNldCI6LTF9XSxbMSwyLCJcXGdhbW1hIFxccGlfQyIsMix7Im9mZnNldCI6MX1dLFswLDEsIlxccGhpIl1d
            \[\begin{tikzcd}[ampersand replacement=\&]
            {A'}
                  \& {B \times C} \& D
                  \arrow["{\beta\pi_B}", shift left, from=1-2, to=1-3]
                  \arrow["{\gamma \pi_C}"', shift right, from=1-2, to=1-3]
                  \arrow["\phi", from=1-1, to=1-2]
            \end{tikzcd}\]
            Нетрудно видеть, что действительно $\beta \pi_B \phi = \gamma \pi_C \phi$. Но тогда уравнивающий морфизм $\phi$ пропускается через эквалайзер.
        }
    }

    \examples{
        \item Практически во всех конкретных категориях $B \times C$ --- просто декартово произведение.

        Например, рассмотрим $\cat{Set}$.
        Тогда pullback --- это эквалайзер двух отображений \begin{align*}
                                                               B \times C &\map D \\ (b, c)& \mapsto \beta(b) \\ (b, c) & \mapsto \gamma(c)
        \end{align*}
        Таким образом, pullback $\beta$ и $\gamma$ --- это стрелки % https://q.uiver.app/#q=WzAsNCxbMCwxLCJcXGRlZnNldHsoYiwgYyl9e1xcYmV0YShiKSA9IFxcZ2FtbWEoYyl9Il0sWzEsMSwiQiBcXHRpbWVzIEMiXSxbMiwwLCJCIl0sWzIsMiwiQyJdLFswLDEsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsMiwiXFxwaV9CIiwyXSxbMSwzLCJcXHBpX0MiXV0=
        $\begin{tikzcd}[ampersand replacement=\&,cramped,row sep=tiny]
             \&\& B \\
             {\defset{(b, c)}{\beta(b) = \gamma(c)}} \& {B \times C} \\
             \&\& C
             \arrow[hook, from=2-1, to=2-2]
             \arrow["{\pi_B}"', from=2-2, to=1-3]
             \arrow["{\pi_C}", from=2-2, to=3-3]
        \end{tikzcd}$
        \item В $\cat{Ring}$ можно взять \emph{удвоение кольца $R$ вдоль идеала $I$}.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJSIFxcbHRpbWVzIEkiXSxbMSwwLCJSIl0sWzAsMSwiUiJdLFsxLDEsIlIvSSJdLFswLDIsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsyLDMsIlxccGkiXSxbMCwxLCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSwzLCJcXHBpIiwyXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
        {R \ltimes I}
              \& R \\
              R \& {R/I}
              \arrow[dashed, from=1-1, to=2-1]
              \arrow["\pi", from=2-1, to=2-2]
              \arrow[dashed, from=1-1, to=1-2]
              \arrow["\pi"', from=1-2, to=2-2]
        \end{tikzcd}\]
        $R \ltimes I = \defset{(a, b)}{a, b \in R, a \equiv b \pmod{I}} = \defset{(a, a + i)}{a \in R, i \in I}$.
        Таким образом, по универсальному свойству pullback'а, для сечения $R \map R \ltimes I$ существуют две ретракции
    % https://q.uiver.app/#q=WzAsNSxbMSwxLCJSIFxcbHRpbWVzIEkiXSxbMiwxLCJSIl0sWzEsMiwiUiJdLFsyLDIsIlIvSSJdLFswLDAsIlIiXSxbMCwyXSxbMiwzLCJcXHBpIl0sWzAsMV0sWzEsMywiXFxwaSIsMl0sWzQsMCwiIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzQsMSwiXFxpZCJdLFs0LDIsIlxcaWQiLDJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              R \\
              \& {R \ltimes I} \& R \\
              \& R \& {R/I}
              \arrow[from=2-2, to=3-2]
              \arrow["\pi", from=3-2, to=3-3]
              \arrow[from=2-2, to=2-3]
              \arrow["\pi"', from=2-3, to=3-3]
              \arrow[dashed, from=1-1, to=2-2]
              \arrow["\id", from=1-1, to=2-3]
              \arrow["\id"', from=1-1, to=3-2]
        \end{tikzcd}\]
        Теперь, у нас имеется композиция в категории $\cat{CRing}$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSIl0sWzEsMCwiUiBcXGx0aW1lcyBJIl0sWzIsMCwiUiJdLFswLDFdLFsxLDJdLFswLDIsIlxcaWQiLDAseyJjdXJ2ZSI6LTJ9XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              R \& {R \ltimes I} \& R
              \arrow[from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
              \arrow["\id", curve={height=-12pt}, from=1-1, to=1-3]
        \end{tikzcd}\]
        Применяя какой-нибудь функтор $\Fc: \cat{Ring} \map \cat{Group}$ (например, $GL_n$), получим
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXEZjKFIpIl0sWzEsMCwiXFxGYyhSIFxcbHRpbWVzIEkpIl0sWzIsMCwiXFxGYyhSKSJdLFswLDEsIlxcYWxwaGEiLDJdLFsxLDIsIlxcYmV0YSIsMl0sWzAsMiwiXFxpZCIsMCx7ImN1cnZlIjotMn1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Fc(R)}
              \& {\Fc(R \ltimes I)} \& {\Fc(R)}
              \arrow["\alpha"', from=1-1, to=1-2]
              \arrow["\beta"', from=1-2, to=1-3]
              \arrow["\id", curve={height=-12pt}, from=1-1, to=1-3]
        \end{tikzcd}\]
        Средняя группа --- полупрямое произведение ядра $\beta$ и образа $\alpha$.

        В таком стиле определяются некоторые базовые объекты K-теории.
        \item Точно так же можно удваивать группу вдоль нормальной подгруппы, результат будет изоморфен полупрямому произведению.
        \exercise{Проверить самостоятельно.} % exercise
        \item Пусть в $\cat{C}$ имеется инициальный объект $*$.
        Тогда (например, в $\cat{Rng}$, $\cat{Group}$, $\modR{R}$) ядро можно определить, как pullback:
    % https://q.uiver.app/#q=WzAsNCxbMCwxLCIqIl0sWzEsMSwiRCJdLFsxLDAsIkIiXSxbMCwwLCJcXEtlcihcXHBoaSkiXSxbMiwxLCJcXHBoaSJdLFswLDFdLFszLDAsIiIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDIsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Ker(\phi)}
              \& B \\
              {*} \& D
              \arrow["\phi", from=1-2, to=2-2]
              \arrow[from=2-1, to=2-2]
              \arrow[dashed, from=1-1, to=2-1]
              \arrow[dashed, from=1-1, to=1-2]
        \end{tikzcd}\]
        Но в $\cat{CRing}$ пулбэк этой диаграммы --- что-то странное.

        Поэтому можно считать $*$ не инициальным, а нулевым объектом --- если нулевой объект существует, то так определённое ядро будет совпадать со стандартным представлением о нём.
    }
    \definition[Pushout (пушаут)]{
        Двойственный объект к pullback'у.
        Инициальный объект в категории коммутативных квадратов с фиксированными морфизмами $\beta, \gamma$:
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJEIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJBIl0sWzAsMiwiXFxnYW1tYSJdLFswLDEsIlxcYmV0YSIsMl0sWzEsM10sWzIsM11d
        \[\begin{tikzcd}[ampersand replacement=\&]
              D \& B \\
              C \& A
              \arrow["\gamma", from=1-1, to=2-1]
              \arrow["\beta"', from=1-1, to=1-2]
              \arrow[from=1-2, to=2-2]
              \arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
    }
    % https://q.uiver.app/#q=WzAsNSxbMCwwLCJEIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJBIl0sWzIsMiwiQSciXSxbMCwyLCJcXGdhbW1hIl0sWzAsMSwiXFxiZXRhIiwyXSxbMSwzXSxbMiwzXSxbMyw0LCJcXGV4aXN0cyEiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XSxbMSw0LCJcXGZvcmFsbCIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsyLDQsIlxcZm9yYWxsIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          D \& B \\
          C \& A \\
          \&\& {A'}
          \arrow["\gamma", from=1-1, to=2-1]
          \arrow["\beta"', from=1-1, to=1-2]
          \arrow[from=1-2, to=2-2]
          \arrow[from=2-1, to=2-2]
          \arrow["{\exists!}"{description}, dotted, from=2-2, to=3-3]
          \arrow["\forall", dashed, from=1-2, to=3-3]
          \arrow["\forall"', dashed, from=2-1, to=3-3]
    \end{tikzcd}\]
    Если $D$ --- инициальный объект, то пушаут --- просто копроизведение (и если $D$ --- финальный, то pullback --- произведение).

    Сформулируем двойственное к доказанному утверждению про пулбэки.
    \proposal{
        Пусть в категории $\cat{C}$ существуют все копроизведения и коэквалайзеры (или как минимум те, о которых речь ниже).

        Тогда $A$ --- pushout $\begin{tikzcd}[ampersand replacement=\&,cramped]
                                   B \& D \& C\arrow[from=1-1, to=1-2]\arrow[from=1-3, to=1-2]
        \end{tikzcd}$ $\iff A$ --- коэквалайзер отображений
    % https://q.uiver.app/#q=WzAsNixbMCwxLCJEIl0sWzEsMCwiQiJdLFsyLDEsIkJcXHNxY3VwIEMiXSxbMCwyLCJEIl0sWzIsMiwiQlxcc3FjdXAgQyJdLFsxLDMsIkMiXSxbMCwxLCJcXGdhbW1hIl0sWzEsMiwiXFxwaV9CIl0sWzAsMiwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsNSwiXFxnYW1tYSIsMl0sWzUsNCwiXFxwaV9DIiwyXSxbMyw0LCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&,row sep=tiny]
              \& B \\
              D \&\& {B\sqcup C} \\
              D \&\& {B\sqcup C} \\
              \& C
              \arrow["\gamma", from=2-1, to=1-2]
              \arrow["{\pi_B}", from=1-2, to=2-3]
              \arrow[dashed, from=2-1, to=2-3]
              \arrow["\gamma"', from=3-1, to=4-2]
              \arrow["{\pi_C}"', from=4-2, to=3-3]
              \arrow[dashed, from=3-1, to=3-3]
        \end{tikzcd}\]
    }
    Пушауты неформально обозначают $B \sqcup_D C$.

    \examples{
        \item
        Пусть имеется коммутативный квадрат в $\cat{CRing}$:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJEIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJBIl0sWzAsMiwiXFxnYW1tYSJdLFswLDEsIlxcYmV0YSIsMl0sWzIsMywiXFxnYW1tYSciLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSwzLCJcXGJldGEnIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              D \& B \\
              C \& A
              \arrow["\gamma", from=1-1, to=2-1]
              \arrow["\beta"', from=1-1, to=1-2]
              \arrow["{\gamma'}", dashed, from=2-1, to=2-2]
              \arrow["{\beta'}"', dashed, from=1-2, to=2-2]
        \end{tikzcd}\]
        Тогда $A, B, C$ --- $D$-алгебры. Отображение $B \times C \map A, (b, c) \mapsto \beta'(b) \cdot \gamma'(c)$ --- $D$-билинейно, как отображение модулей.

        Тогда по универсальному свойству тензорного произведения $B \times C \map A$ пропускается через тензорное произведение $B \otimes_D C$ со вложениями $b \mapsto b \otimes 1_C, c \mapsto 1_B \otimes c$, и с умножением, определённым покомпонентно: $(b\otimes c) \cdot(b' \otimes c') = bb' \otimes cc'$.

        Но если единицы нет, то пушаут построить не получится.
        Аналогично, в $\cat{CRing}$ не существует пулбэков.

        \item В $\cat{Group}$ pushout --- \emph{амальгамированное свободное произведение} (такой термин употребляют, если $A \le B, C$, то есть $\beta, \gamma$ --- моно).
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCIoQiAqIEMpL19OIl0sWzAsMSwiXFxiZXRhIl0sWzEsM10sWzAsMiwiXFxnYW1tYSIsMl0sWzIsM11d
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& {(B * C)/_N}
              \arrow["\beta", from=1-1, to=1-2]
              \arrow[from=1-2, to=2-2]
              \arrow["\gamma"', from=1-1, to=2-1]
              \arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
        где $N$ --- наименьшая нормальная подгруппа, содержащая $\defset{\beta(a)\gamma(a)^{-1}}{a \in A}$.

        Обозначается $B \underset{A}* C$.

        По-другому, данная конструкция называется HNN (?).
        \item В категории модулей или абелевых групп всё проще, там вместо свободного произведения обычное декартово.
    }
    \exercise{
        Дан pushout в произвольной категории:% https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkIiXSxbMSwxLCJDIl0sWzAsMiwiXFx0aGV0YSJdLFswLDEsIlxcdGhldGEiLDJdLFsxLDMsIlxccGhpIiwyXSxbMiwzLCJcXHBzaSJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              B \& C
              \arrow["\theta", from=1-1, to=2-1]
              \arrow["\theta"', from=1-1, to=1-2]
              \arrow["\phi"', from=1-2, to=2-2]
              \arrow["\psi", from=2-1, to=2-2]
        \end{tikzcd}\]
        Следующие условия эквивалентны
        \bullets{
            \item $\theta$ --- эпи.
            \item $\phi$ --- изо.
            \item $\psi$ --- изо.
            \item $\phi = \psi$.
        }
    }


    \section{Сопряжённые функторы}
    \label{comma-category}
    Рассмотрим следующую конструкцию:
    пусть имеется функтор $\cat{F}: \cat{B} \map \cat{C}$, пусть $X \in \cat{C}$.
    Построим категорию $(X \downarrow \cat{F})$.

    Её объекты --- это $\{(B, \phi) \in B \times \Mor_\catC(X, \cat{F}(B))\}$.

    Морфизмы определены так: $(B, \phi) \map (B', \phi')$ --- это $\defset{\alpha \in \Mor_\cat{B}(B, B')}{% https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzAsMSwiXFxjYXR7Rn0oQikiXSxbMSwxLCJcXGNhdHtGfShCJykiXSxbMSwyLCJcXGNhdHtGfShcXGFscGhhKSJdLFswLDEsIlxccGhpIl0sWzAsMiwiXFxwaGknIl1d
        \begin{tikzcd}[ampersand replacement=\&]
            X \\
            {\cat{F}(B)} \& {\cat{F}(B')}
            \arrow["{\cat{F}(\alpha)}", from=2-1, to=2-2]
            \arrow["\phi", from=1-1, to=2-1]
            \arrow["{\phi'}", from=1-1, to=2-2]
        \end{tikzcd}}$.

    По-английски эта категория почему-то называется comma-category, категория запятой.

    Аналогично $(\cat F \downarrow X)$ --- это категория стрелок $\cat F(B) \map X$ с такими морфизмами $\alpha \in \Mor_\catB(B, B')$:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGNhdCBGKEIpIl0sWzEsMCwiXFxjYXQgRihCJykiXSxbMSwxLCJYIl0sWzAsMiwiXFxwaGkiLDJdLFsxLDIsIlxccGhpJyJdLFswLDEsIlxcY2F0IEYoXFxhbHBoYSkiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\cat F(B)} \& {\cat F(B')} \\
    \& X
    \arrow["\phi"', from=1-1, to=2-2]
    \arrow["{\phi'}", from=1-2, to=2-2]
    \arrow["{\cat F(\alpha)}", from=1-1, to=1-2]
    \end{tikzcd}\]
    Заинтересуемся инициальными объектами в категории $(X \downarrow \cat{F})$.
    \examples{
        \item Пусть $\cat{F}: \cat{Group} \map \cat{Set}$ --- забывающий функтор, и зафиксируем $X \in \cat{Set}$.

        Тогда инициальный объект -- это свободная группа $F_X$ вместе с вложением $X \hookrightarrow \cat{F}(F_X)$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzAsMSwiXFxjYXR7Rn0oRl9YKSJdLFsxLDEsIlxcY2F0e0Z9KEcpIl0sWzAsMV0sWzAsMl0sWzEsMl1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              X \\
              {\cat{F}(F_X)} \& {\cat{F}(G)}
              \arrow[from=1-1, to=2-1]
              \arrow[from=1-1, to=2-2]
              \arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
        \item    Возьмём функтор вложения $\cat{F}: \cat{Ab} \map \cat{Group}$.
        Пусть $G \in \cat{Group}$. Тогда инициальный объект в $(G \downarrow \cat{F})$ --- это такой объект, что из него есть единственный морфизм в другую абелеву группу:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJHIl0sWzAsMSwiR157XFxhYn0iXSxbMSwxLCJBIl0sWzAsMl0sWzAsMV0sWzEsMiwiXFxleGlzdHMhIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              G \\
              {G^{\ab}} \& A
              \arrow[from=1-1, to=2-2]
              \arrow[from=1-1, to=2-1]
              \arrow["{\exists!}"', dashed, from=2-1, to=2-2]
        \end{tikzcd}\]
        Универсальное функтор $\cat{Group} \map \cat{Ab}$ --- это абелианизация.
    }
    Пусть $\cat{B}, \cat{C}$ --- категории.
    Рассмотрим два функтора % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGNhdHtCfSJdLFsxLDAsIlxcY2F0e0N9Il0sWzAsMSwiXFxjYXR7Rn0iLDAseyJvZmZzZXQiOi0xfV0sWzEsMCwiXFxjYXR7R30iLDAseyJvZmZzZXQiOi0xfV1d
    $\begin{tikzcd}[ampersand replacement=\&]
    {\cat{B}}
         \& {\cat{C}}
         \arrow["{\cat{F}}", shift left, from=1-1, to=1-2]
         \arrow["{\cat{G}}", shift left, from=1-2, to=1-1]
    \end{tikzcd}$.
    \definition[$\cat{G}$ и $\cat{F}$ сопряжены]{
        $\forall B \in \cat{B}, C \in \cat{C}$: существует биекция между множествами морфизмов $\Mor_\cat{C}(C, \cat{F}(B))$ и $\Mor_\cat{B}(\cat{G}(C), B)$, причём биекция --- естественна и по $B$, и по $C$.
        То есть имеется естественная биекция между функторами $\cat{C}^{\text{op}} \times \cat{B} \map \cat{Set}$.
        Здесь $\cat{F}$ называется правым сопряжённым, $\cat{G}$ --- левым сопряжённым.
    }
    Далее мы проверим, что инициальные объекты в категории $X \downarrow \cat{F}$ имеют самое непосредственное отношение к сопряжённым функторам.
    \newlection{30 ноября 2023 г.}
%    Пусть функторы $\cat F$ и $\cat G$ сопряжены, то есть имеется естественная биекция $\eta: \Mor_\catB(\cat G (X), Y) \cong \Mor_\catC(X, \cat F(Y))$.
%    Наверно, это записывается так:% https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGNhdCBCIl0sWzIsMCwiXFxjYXQgQyJdLFswLDEsIlxcY2F0IEYiLDAseyJjdXJ2ZSI6LTJ9XSxbMCwxLCJcXGNhdCBHIiwyLHsiY3VydmUiOjIsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIsMywiXFxldGEiLDAseyJsZXZlbCI6MSwic3R5bGUiOnsibmFtZSI6ImFkanVuY3Rpb24ifX1dXQ==
%    \[\begin{tikzcd}[ampersand replacement=\&]
%    {\cat B} \&\& {\cat C}
%    \arrow[""{name=0, anchor=center, inner sep=0}, "{\cat F}", curve={height=-12pt}, from=1-1, to=1-3]
%    \arrow[""{name=1, anchor=center, inner sep=0}, "{\cat G}"', curve={height=12pt}, tail reversed, no head, from=1-1, to=1-3]
%    \arrow["\eta", "\dashv"{anchor=center, rotate=-90}, draw=none, from=0, to=1]
%    \end{tikzcd}\]
    Пусть $\cat F: \cat B \map \cat C$ --- какой-то функтор.

    Рассмотрим $X \in \cat C$, и вместе с ним категорию $(X \downarrow \cat F)$~(\ref{comma-category}).

    Пусть для всех $X \in \cat C$ в соответствующих категориях нашлось по инициальному объекту, обозначим объект их соответственно $(\cat G(X), f_X)$.
    Далее мы хотим показать, что $\cat{G}: \cat C \map \cat B$ --- функтор.
    Для этого сперва определим его на морфизмах следующим образом:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJYIl0sWzEsMCwiWCciXSxbMCwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzEsMSwiXFxjYXQgRihcXGNhdCBHKFgnKSkiXSxbMCwyLCJmX1giXSxbMSwzLCJmX3tYJ30iXSxbMCwxLCJcXGJldGEiXSxbMiwzLCJcXGNhdCBGKFxcY2F0IEcoXFxiZXRhKSkiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          X \& {X'} \\
          {\cat F(\cat G(X))} \& {\cat F(\cat G(X'))}
          \arrow["{f_X}", from=1-1, to=2-1]
          \arrow["{f_{X'}}", from=1-2, to=2-2]
          \arrow["\beta", from=1-1, to=1-2]
          \arrow["{\cat F(\cat G(\beta))}", dashed, from=2-1, to=2-2]
    \end{tikzcd}\]
    А именно, $(\cat G(X'), f_{X'}\beta) \in (X \downarrow \cat F)$, и из инициальности $(\cat G(X), f_X)$ найдётся единственный морфизм $(\cat G(X), f_X) \map (\cat G(X'), f_{X'}\beta)$, то есть найдётся единственная стрелка $\cat G(X) \map \cat G(X')$, и мы эту стрелку назовём $\cat G(\beta)$.

    Далее надо проверить, что функтор сохраняет композицию.
    % https://q.uiver.app/#q=WzAsNixbMCwwLCJYIl0sWzEsMCwiWCciXSxbMiwwLCJYJyciXSxbMCwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzEsMSwiXFxjYXQgRihcXGNhdCBHKFgnKSkiXSxbMiwxLCJcXGNhdCBGKFxcY2F0IEcoWCcnKSkiXSxbMCwzLCJmX1giXSxbMSw0LCJmX3tYJ30iXSxbMiw1LCJmX3tYJyd9Il0sWzAsMSwiXFxiZXRhIl0sWzEsMiwiXFxnYW1tYSJdLFswLDIsIlxcZ2FtbWFcXGJldGEiLDAseyJjdXJ2ZSI6LTR9XSxbMyw0LCJcXGNhdCBGKFxcY2F0IEcoXFxiZXRhKSkiLDJdLFs0LDUsIlxcY2F0IEYoXFxjYXQgRyhcXGdhbW1hKSkiLDJdLFszLDUsIlxcY2F0IEYoXFxjYXQgRyhcXGdhbW1hXFxiZXRhKSkiLDIseyJjdXJ2ZSI6NH1dXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          X \& {X'} \& {X''} \\
          {\cat F(\cat G(X))} \& {\cat F(\cat G(X'))} \& {\cat F(\cat G(X''))}
          \arrow["{f_X}", from=1-1, to=2-1]
          \arrow["{f_{X'}}", from=1-2, to=2-2]
          \arrow["{f_{X''}}", from=1-3, to=2-3]
          \arrow["\beta", from=1-1, to=1-2]
          \arrow["\gamma", from=1-2, to=1-3]
          \arrow["\gamma\beta", curve={height=-24pt}, from=1-1, to=1-3]
          \arrow["{\cat F(\cat G(\beta))}"', from=2-1, to=2-2]
          \arrow["{\cat F(\cat G(\gamma))}"', from=2-2, to=2-3]
          \arrow["{\cat F(\cat G(\gamma\beta))}"', curve={height=24pt}, from=2-1, to=2-3]
    \end{tikzcd}\]
    По определению $\cat G(\gamma\beta)$ --- это та единственная стрелка $(\cat G(X), f_X) \map (\cat G(X''), f_{X''}\gamma\beta)$, которая делает диаграмму коммутативной, и можно заметить, что в качестве этой стрелки подходит $\cat G(\gamma)\cat G(\beta)$ (в проверке используется то, что $\cat F$ сохраняет композицию).

    Наконец, осталось проверить, что $\cat G$ сохраняет единицу, то есть фактически надо проверить, что диаграмма ниже --- коммутативна.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJYIl0sWzAsMSwiXFxjYXQgRihcXGNhdCBHKFgpKSJdLFsxLDAsIlgiXSxbMSwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzAsMiwiXFxpZF9YIl0sWzAsMSwiZl9YIiwyXSxbMiwzLCJmX1giXSxbMSwzLCJcXGNhdCBGKFxcaWRfe1xcY2F0IEcoWCl9KSkiLDJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          X \& X \\
          {\cat F(\cat G(X))} \& {\cat F(\cat G(X))}
          \arrow["{\id_X}", from=1-1, to=1-2]
          \arrow["{f_X}"', from=1-1, to=2-1]
          \arrow["{f_X}", from=1-2, to=2-2]
          \arrow["{\cat F(\id_{\cat G(X)}))}"', from=2-1, to=2-2]
    \end{tikzcd}\]
    Так как $\cat F$ --- сохраняет $\id$, то это действительно правда.
    \theorem{
    Так построенный функтор $\cat G: \cat C \map \cat B$ --- левый сопряжённый к $\cat F$.
    \provehere{
    Определим биекцию $\eta_{X,Y}: \Mor_\catC(X, \cat F(Y)) \map \Mor_\catB(\cat G(X), Y)$ следующим образом: морфизму $f: X \map \cat F(Y)$ сопоставим такой морфизм $\eta_{X,Y}(f)$, что диаграмма коммутативна:
    % https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzAsMCwiWCJdLFsxLDEsIlxcY2F0IEYoWSkiXSxbMSwwLCJmX1giLDJdLFsxLDIsImYiXSxbMCwyLCJcXGNhdCBGKFxcZXRhX3tYLFl9KSIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              X \\
              {\cat F(\cat G(X))} \& {\cat F(Y)}
              \arrow["{f_X}"', from=1-1, to=2-1]
              \arrow["f", from=1-1, to=2-2]
              \arrow["{\cat F(\eta_{X,Y})}"', dashed, from=2-1, to=2-2]
        \end{tikzcd}\]
    Очевидно, что тогда в качестве обратного отображения $\eta^{-1}_{X,Y}$ надо выбрать $g \mapsto \cat F(g)f_X$.

    Теперь докажем, что $\eta$ --- \emph{естественное} преобразование между функторами $[X, Y \mapsto \Mor_\catC(X, \cat F(Y))] \map [X, Y \mapsto \Mor_\catB(\cat G(X), Y)]$.
        По определению это значит, что $\forall \alpha: X'\map X, \beta: Y \map Y'$ диаграмма ниже коммутативна.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXE1vcl9cXGNhdEMoWCwgXFxjYXQgRihZKSkiXSxbMSwwLCJcXE1vcl9cXGNhdEMoWCcsIFxcY2F0IEYoWScpKSJdLFswLDEsIlxcTW9yX1xcY2F0QihcXGNhdCBHKFgpLCBZKSJdLFsxLDEsIlxcTW9yX1xcY2F0QihcXGNhdCBHKFgnKSwgWScpIl0sWzAsMSwiXFxNb3JfXFxjYXRDKFxcYWxwaGEsIFxcY2F0IEYoXFxiZXRhKSkiXSxbMiwzLCJcXE1vcl9cXGNhdEIoXFxjYXQgRyhcXGFscGhhKSwgXFxiZXRhKSJdLFswLDIsIlxcZXRhX3tYLFl9XnstMX0iLDIseyJvZmZzZXQiOjIsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6ImFycm93aGVhZCJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMywiXFxldGFfe1gnLFknfV57LTF9IiwyLHsib2Zmc2V0IjoyLCJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJhcnJvd2hlYWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDIsIlxcZXRhX3tYLFl9IiwwLHsib2Zmc2V0IjotMn1dLFsxLDMsIlxcZXRhX3tYJyxZJ30iLDAseyJvZmZzZXQiOi0yfV1d
        \[\begin{tikzcd}[ampersand replacement=\&,column sep=huge]
        {\Mor_\catC(X, \cat F(Y))} \& {\Mor_\catC(X', \cat F(Y'))} \\
        {\Mor_\catB(\cat G(X), Y)} \& {\Mor_\catB(\cat G(X'), Y')}
        \arrow["{\Mor_\catC(\alpha, \cat F(\beta))}", from=1-1, to=1-2]
        \arrow["{\Mor_\catB(\cat G(\alpha), \beta)}", from=2-1, to=2-2]
        \arrow["{\eta_{X,Y}^{-1}}"', shift right=2, tail reversed, no head, from=1-1, to=2-1]
        \arrow["{\eta_{X',Y'}^{-1}}"', shift right=2, tail reversed, no head, from=1-2, to=2-2]
        \arrow["{\eta_{X,Y}}", shift left=2, from=1-1, to=2-1]
        \arrow["{\eta_{X',Y'}}", shift left=2, from=1-2, to=2-2]
        \end{tikzcd}\]
    Это всё морфизмы в $\cat{Set}$, проверим коммутативность на элементах.

    Рассмотрим $\psi \in \Mor_\catB(\cat G(X), Y)$, она уходит вправо в $\beta \psi\cat G(\alpha)$, далее наверх в $\cat F(\beta \psi\cat G(\alpha))f_{X'}$.

    Если же сначала пойти наверх в $\cat F(\psi)f_X$, то потом эта штука уйдёт вправо в $\cat F(\beta)\cat F(\psi)\alpha f_X$

    Эти две штуки равны в точности по определению действия $\cat G$ на морфизмах.
%    Рассмотрим естественное преобразование $f = \defset{f_X}{X \in \cat C}: \id_\catC \map \cat F \circ \cat G$.
%        То, что это действительно естественное преобразование $\id_\catC \map \cat F \circ \cat G$ следует из диаграммы, уже рисовавшейся выше:
%     https://q.uiver.app/#q=WzAsNCxbMCwwLCJYIl0sWzEsMCwiWCciXSxbMCwxLCJcXGNhdCBGKFxcY2F0IEcoWCkpIl0sWzEsMSwiXFxjYXQgRihcXGNhdCBHKFgnKSkiXSxbMCwyLCJmX1giXSxbMSwzLCJmX3tYJ30iXSxbMCwxLCJcXGJldGEiXSxbMiwzLCJcXGNhdCBGKFxcY2F0IEcoXFxiZXRhKSkiXV0=
%        \[\begin{tikzcd}[ampersand replacement=\&]
%              X \& {X'} \\
%              {\cat F(\cat G(X))} \& {\cat F(\cat G(X'))}
%              \arrow["{f_X}", from=1-1, to=2-1]
%              \arrow["{f_{X'}}", from=1-2, to=2-2]
%              \arrow["\beta", from=1-1, to=1-2]
%              \arrow["{\cat F(\cat G(\beta))}", from=2-1, to=2-2]
%        \end{tikzcd}\]
%    Для сопряжённых функторов $\cat F$ и $\cat G$ такое преобразование $\id_\catC \map \cat F \circ \cat G$ называется \emph{единицей сопряжения}.
    }
    }
    Верно и обратное утверждение, для этого нам потребуется по сопряжённым функторам восстанавливать $f_X \in \Mor_\catC(X, \cat F(\cat G(X)))$.

    Заметим, что $\eta_{X,Y}(f_X) = \id_{\cat G(X)}$, то есть имея $\eta: \Mor_\catC(X, \cat F(Y)) \cong \Mor(\cat G(X), Y)$, мы можем восстановить $f_X$, подставив $Y = \cat G(X)$, и рассмотрев прообраз $\id_{\cat G(X)}$ из правой части.
    Данный морфизм $f_X$ (а точнее функтор $X \mapsto f_X$) называется \emph{единицей сопряжения}.
    \lemma{
        Для сопряжённых функторов $\begin{tikzcd}[ampersand replacement=\&,cramped]
    {\cat B} \&\& {\cat C}
    \arrow[""{name=0, anchor=center, inner sep=0}, "{\cat F}", curve={height=-12pt}, from=1-1, to=1-3]
    \arrow[""{name=1, anchor=center, inner sep=0}, "{\cat G}"', curve={height=12pt}, tail reversed, no head, from=1-1, to=1-3]
    \arrow["\eta", "\dashv"{anchor=center, rotate=-90}, draw=none, from=0, to=1]
    \end{tikzcd}$, и для любого $X \in \cat C$, категория запятой $(X \downarrow \cat F)$ имеет инициальный объект, причём он равен $(\cat G(X), f_X)$, где $f_X$ ---   единица сопряжения.
    \provehere{
        Рассмотрим какой-нибудь другой объект $(Y, f) \in (X \downarrow \cat F)$ (иными словами $Y \in \cat B, f \in \Mor_\catC(X, \cat F(Y))$).
    Надо проверить, что существует и единственна $\alpha: \cat G(X) \map Y$, делающая диаграмму коммутативной.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzAsMSwiXFxjYXQgRihcXGNhdCBHKFgpKSJdLFsxLDEsIlxcY2F0IEYoWSkiXSxbMCwxLCJmX1giLDJdLFswLDIsImYiXSxbMSwyLCJcXGNhdCBGKFxcYWxwaGEpIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              X \\
              {\cat F(\cat G(X))} \& {\cat F(Y)}
              \arrow["{f_X}"', from=1-1, to=2-1]
              \arrow["f", from=1-1, to=2-2]
              \arrow["{\cat F(\alpha)}"', dashed, from=2-1, to=2-2]
        \end{tikzcd}\]
    Так как по стрелке $f: X \map \cat F(Y)$ хочется получить стрелку $\alpha: \cat G(X) \map Y$, то логично предположить, что $\alpha = \eta_{X,Y}(f)$. А почему это так, я ещё не понял
    }
    }
    \newlection{5 декабря 2023 г.}

    \subsection{Левые сопряжённые к функторам типа забывающих}
    \bullets{
        \item Свободные объекты
        \bullets{
            \item Левый сопряжённый к забывающему $\cat{Group} \map \cat{Set}$ --- это свободная группа на данном множестве.
            \item Левый сопряжённый к забывающему $\cat{Mon} \map \cat{Set}$ --- это свободный моноид на данном множестве, слова над данным алфавитом.
            \item Левый сопряжённый к забывающему $R\text{-}\cat{Alg} \map \cat{Set}$ --- это свободная алгебра на данном множестве ($R\text{-}\cat{Alg}$ --- необязательно коммутативные алгебры с единицей).

            Здесь и ниже $R$ --- коммутативное кольцо с единицей.}
        \item Левый сопряжённый к забывающему $R\text{-}\cat{Alg} \map \cat{Mon}$ --- это полугрупповая алгебра $M \mapsto R[M]$.
        Моноид $M$ вкладывается в мультипликативный моноид $R[M]$
        \item Левый сопряжённый к функтору $*: \cat{Ring} \map \cat{Group}$, сопоставляющему кольцу группу его обратимых элементов --- это $G \mapsto \Z[G]$, групповая алгебра.
        \item Левый сопряжённый к забывающему функтору $R\text{-}\cat{Alg} \map \Lmod{R}$ --- это $T$, групповая алгебра.
        \item Левый сопряжённый к забывающему функтору $\cat{Commutative}~R\text{-}\cat{Alg} \map \Lmod{R}$ --- это $S$, симметрическая алгебра.
        \item Внешняя степень $\bigwedge$ --- это левый сопряжённый к функтору из $\Z$-градуированных $R$-алгебр в $R$-модули, сопоставляющий $A_0 \oplus A_1 \oplus \dots \mapsto A_1$.
        \item Пусть $\phi: R \map A$.
        Тогда $\phi^\#: \Lmod{A} \map \Lmod{R}$ (что является забывающим функтором, если $\phi$ инъективно)--- левый сопряжённый к $\phi_\#: \Lmod{R} \map \Lmod{A}, \phi_\#(M) = A \otimes_R M$.
        \item Рассмотрим функтор $\cat{Cat} \map \cat{Graph}$, забывающий про композицию морфизмов.
        Левый сопряжённый к данному функтору --- категория путей в графе.
        \item \up \exercise{
            Какие левый и правый сопряжённый к забывающему $G\text{-}\cat{Set} \map \cat{Set}$?
        }
    }

    \subsection{Левые сопряжённые к вложениям}
    \bullets{
        \item Левый сопряжённый к функтору вложения $\cat{Ab} \map \cat{Group}$ --- это абелианизация.
        % Единица --- не мономорфизм?
        Правого сопряжённого, наверно, нет --- внутри группы нет никакой абелевой подгруппы, сохраняющейся при морфизмах.
        \item Левый сопряжённый к функтору вложения $\cat{CRing} \map \cat{Ring}$ --- это $R \mapsto R/[R, R]$, где $[R, R]$ --- двусторонний идеал, порождённый аддитивными коммутаторами.
        \item Левый сопряжённый к функтору вложения $\phi^\#: R\text{-}\cat{Alg} \map \cat{Ring}$ --- это $\phi_\#$, если $\phi: \Z \map R$ --- гомоморфизм колец с единицей.
        \item Левый сопряжённый к функтору вложения $\cat{Ring} \map \cat{Rng}$ --- это функтор $\cat{Rng} \map \cat{Ring}, I \mapsto \Z \oplus I$ (в результате $I$ стало идеалом). Умножение определено понятным образом: $(n + i)(m + j) = nm + mi + nj + ij$, здесь $nm \in \Z$ и $mi, nj$ --- умножение на целые, полученное из сложения в $I$.
        \item Рассмотрим функтор вложения $\cat{F}: \cat{Group} \map \cat{Mon}$.
        Какие к нему сопряжённые? Так как я ещё не разобрался в предыдущей лекции, то дальше не особо понимаю, что происходит.

        Если $\cat{G}$ --- правый сопряжённый к $\cat{F}$, то коединица сопряжения $\cat{F}\cat{G} \map \id$.
        \[\Mor(\cat{F}(X), Y) \map \Mor(X, \cat{G(Y)})\]

        $\cat{G}(M) = M^*$ --- сопоставляет моноиду группу его обратимых элементов.

        Если $\cat{G}$ --- левый сопряжённый к $\cat{F}$, то единица сопряжения $\id \map \cat{F}\cat{G}$.
        Надо по моноиду построить группу $M \mapsto \cat{G}(M)$, такую, что $M \hookrightarrow \cat{G}(M)$.

        Есть две конструкции построить по моноиду универсальную группу.
        \bullets{
            \item Пусть $N$ --- наименьшая нормальная подгруппа в $F_M$, содержащая все элементы вида $xyz^{-1}$, где $z = xy$ в $M$.
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJNIl0sWzEsMCwiRl9NIl0sWzIsMCwiRl9NL04iXSxbMCwxLCJcXHRleHR70LIgfVxcY2F0e1NldH0iLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsxLDIsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dLFswLDIsIlxcdGV4dHvQsiB9XFxjYXR7TW9ufSIsMix7ImN1cnZlIjo0fV1d
            \[\begin{tikzcd}[ampersand replacement=\&]
                  M \& {F_M} \& {F_M/N}
                  \arrow["{\text{в }\cat{Set}}", hook, from=1-1, to=1-2]
                  \arrow[two heads, from=1-2, to=1-3]
                  \arrow["{\text{в }\cat{Mon}}"', curve={height=24pt}, from=1-1, to=1-3]
            \end{tikzcd}\]
            \item В коммутативном случае ($(M, +)$ --- абелев моноид) группу можно составить из формальных разностей $\defset{[A] - [B]}{A, B \in M}$, где $[A]$ --- класс эквивалентности элемента $A$ по отношению $\sim: A \sim C \iff A + D = C + D$.
        }
        \item Левый сопряжённый к $\Mor(Y, \_)$:
        \bullets{
            \item В $\cat{Set}$: $\Mor(X, \Mor(Y, Z)) \cong \Mor(X \times Y, Z)$, поэтому левый сопряжённый к $\Mor(Y, \_)$ --- это $\_ \times Y$.
            \item В $\Lmod{R}$ функтор $\Mor(Y, \_)$ можно воспринимать, как функтор $\Lmod{R} \map \Lmod{R}$.
            Левый сопряжённый к нему --- это $\_ \otimes_R Y$.
            \item С контравариантными функторами так просто не понять, сопряжённый левый, или правый, это зависит от того, где навесить $\text{op}$.
            \exercise{Найти какой-то сопряжённый к $\Mor(\_, Y)$.}
            \item Пусть $\cat{C}$ --- категория с произведением.
            Рассмотрим функтор произведения $\times: \cat{C} \times \cat{C} \map \cat{C}$.

            Левый сопряжённый к этому функтору --- это $\Delta: \cat{C} \map \cat{C} \times \cat{C}, C \mapsto (C, C)$.
        }
    }
    \newlection{12 декабря 2023 г.}
    \section{Пределы}
    Пусть есть последовательность отображений $A_1 \map A_2 \map \dots ?$
    Что естественно считать пределом?

    Если отображения --- вложения, то естественно пределом считать $\bigcup A_i$:
    \[A_1 \hookrightarrow A_2 \hookrightarrow \dots \map \bigcup A_i\]

    Мы уже встречали такие объекты: коэквалайзер, копроизведение, поэтому структуру выше естественно называть не пределом, а копределом.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFsyLDEsIkUiXSxbMywyLCJDIl0sWzAsMSwiIiwwLHsib2Zmc2V0IjotMX1dLFswLDEsIiIsMix7Im9mZnNldCI6MX1dLFsxLDJdLFswLDJdLFswLDMsIiIsMix7ImN1cnZlIjoyfV0sWzIsMywiXFxleGlzdHMgISIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxLDMsIiIsMix7ImN1cnZlIjotMn1dXQ==
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzAsMiwiQiJdLFsxLDEsIkFcXHNxY3VwIEIiXSxbMiwxLCJDIl0sWzIsMywiXFxleGlzdHMhIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzAsMl0sWzEsMl0sWzEsMywiIiwyLHsiY3VydmUiOjJ9XSxbMCwzLCIiLDIseyJjdXJ2ZSI6LTJ9XV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          A \& B \\
          \&\& E \\
          \&\&\& C
          \arrow[shift left, from=1-1, to=1-2]
          \arrow[shift right, from=1-1, to=1-2]
          \arrow[from=1-2, to=2-3]
          \arrow[from=1-1, to=2-3]
          \arrow[curve={height=12pt}, from=1-1, to=3-4]
          \arrow["{\exists !}"', dashed, from=2-3, to=3-4]
          \arrow[curve={height=-12pt}, from=1-2, to=3-4]
    \end{tikzcd}\qquad\begin{tikzcd}[ampersand replacement=\&]
          A \\
          \& {A\sqcup B} \& C \\
          B
          \arrow["{\exists!}", dashed, from=2-2, to=2-3]
          \arrow[from=1-1, to=2-2]
          \arrow[from=3-1, to=2-2]
          \arrow[curve={height=12pt}, from=3-1, to=2-3]
          \arrow[curve={height=-12pt}, from=1-1, to=2-3]
    \end{tikzcd}\]
    Эти диаграммы соответствуют графам ниже
    % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzAsMSwiIiwwLHsib2Zmc2V0IjoxfV0sWzAsMSwiIiwyLHsib2Zmc2V0IjotMX1dXQ==
    % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGJ1bGxldCJdLFswLDEsIlxcYnVsbGV0Il1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          \bullet \& \bullet
          \arrow[shift right, from=1-1, to=1-2]
          \arrow[shift left, from=1-1, to=1-2]
    \end{tikzcd}\begin{tikzcd}[ampersand replacement=\&]
    {} \\
    \\
    {}
    \arrow[dashed, no head, from=1-1, to=3-1]
    \end{tikzcd}\begin{tikzcd}[ampersand replacement=\&]
          \bullet \\
          \bullet
    \end{tikzcd}\]
    \ok
    Пусть $\cat J$ --- индексирующая категория.
    Функтор $\cat F: \cat J \map \cat C$ --- \emph{диаграмма}.
    \definition[Конус над диаграммой $\cat F$]{\down
    \numbers{
        \item Объект $C \in \cat C$.
    \item $\forall J \in \cat J$: морфизм $\eta_J: C \map \cat F(\cat J)$.
    \item Треугольник коммутативен.
    % https://q.uiver.app/#q=WzAsMyxbMSwwLCJDIl0sWzAsMSwiXFxjYXQgRihKKSJdLFsyLDEsIlxcY2F0IEYoSicpIl0sWzEsMiwiXFxjYXQgRihcXGFscGhhKSJdLFswLDEsIlxcZXRhX0oiLDJdLFswLDIsIlxcZXRhX3tKJ30iXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              \& C \\
              {\cat F(J)} \&\& {\cat F(J')}
              \arrow["{\cat F(\alpha)}", from=2-1, to=2-3]
              \arrow["{\eta_J}"', from=1-2, to=2-1]
              \arrow["{\eta_{J'}}", from=1-2, to=2-3]
        \end{tikzcd}\]
    }
    }
    Это может напомнить естественное преобразование функторов, вот другой взгляд:

    Пусть $\Delta_\cat{J}C = \Delta C$ --- функтор из $\cat J$ в $\cat C$, определённый так: $\Delta C(J) = C, \Delta C(\alpha) = \id_C$.
    Тогда конус --- естественное преобразование $\Delta C \map \cat F$, а \emph{коконус} --- естественное преобразование $\cat F \map \Delta F$.

    Теперь из этих конусов надо создать категорию, чтобы определить предел и копредел, как финальный объект в данной категории.

    Морфизм конусов $\Delta C \cat F$ и $\Delta C' \map \cat F$ --- это такой морфизм $\phi: C \map C'$, такой, что все появившиеся диаграммы коммутативны:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJDIl0sWzEsMCwiQyciXSxbMSwxLCJcXGNhdCBGKEopIl0sWzAsMSwiXFxwaGkiXSxbMCwyLCJcXGV0YV9KIiwyXSxbMSwyLCJcXGV0YSdfSiJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          C \& {C'} \\
          \& {\cat F(J)}
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["{\eta_J}"', from=1-1, to=2-2]
          \arrow["{\eta'_J}", from=1-2, to=2-2]
    \end{tikzcd}\]
    Другими словами, это такой морфизм $\phi: C \map C'$, что диаграмма естественных преобразований ниже коммутативна:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXERlbHRhIEMiXSxbMSwwLCJcXERlbHRhIEMnIl0sWzEsMSwiXFxjYXQgRiJdLFsxLDJdLFswLDJdLFswLDEsIlxcRGVsdGEgXFxwaGkiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\Delta C} \& {\Delta C'} \\
    \& {\cat F}
    \arrow[from=1-2, to=2-2]
    \arrow[from=1-1, to=2-2]
    \arrow["{\Delta \phi}", from=1-1, to=1-2]
    \end{tikzcd}\]
    Это действительно категория, так как таких диаграмм не больше, чем $\Mor_\cat{C}(C, C')$.
    \definition[Предел диаграммы $\cat F$]{
    Финальный объект в категории конусов над $\cat F$.
    Обозначают пределы $\varprojlim \cat F$.
    }
    Двойственно, \emph{копредел} $\cat F$ --- инициальный объект в категории коконусов над $\cat F$.

    Копределы пишутся $\varinjlim \cat F$.
    \examples[Пределы]{
        \item % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXGNkb3RzIl0sWzEsMCwiRlt0XS8odF5uKSJdLFsyLDBdLFs0LDAsIkZbdF0vKHReMikiXSxbNSwwLCJGW3RdLyh0KSJdLFszLDBdLFswLDFdLFsxLDJdLFszLDRdLFs1LDNdLFsyLDUsIlxcY2RvdHMiLDFdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              \cdots \& {F[t]/(t^n)} \& {} \& {} \& {F[t]/(t^2)} \& {F[t]/(t)}
              \arrow[from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
              \arrow[from=1-5, to=1-6]
              \arrow[from=1-4, to=1-5]
              \arrow["\cdots"{description}, from=1-3, to=1-4]
        \end{tikzcd}\]
    Предел данной категории --- $F[[t]]$. Это можно обосновать с топологической точки зрения: например, если взять в качестве открытых множеств $(t), (t^2), \dots$, то пополнением $F[t]$ по данной топологии будет $F[[t]]$.
    \item Аналогично
    % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXGNkb3RzIl0sWzEsMCwiXFxaLyhwXm4pIl0sWzIsMF0sWzQsMCwiXFxaLyhwXjIpIl0sWzUsMCwiXFxaLyhwKSJdLFszLDBdLFswLDFdLFsxLDJdLFszLDRdLFs1LDNdLFsyLDUsIlxcY2RvdHMiLDFdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              \cdots \& {\Z/(p^n)} \& {} \& {} \& {\Z/(p^2)} \& {\Z/(p)}
              \arrow[from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
              \arrow[from=1-5, to=1-6]
              \arrow[from=1-4, to=1-5]
              \arrow["\cdots"{description}, from=1-3, to=1-4]
        \end{tikzcd}\]
    $\varprojlim = \hat{\Z}_p$.
    \item В общем случае для идеала $I \normeq R$ определяется \emph{пополнение} $R$ в $I$: $\varprojlim\limits_{n \to \infty}R/I^n = \hat{R}_I$
    }
    \examples[Копределы]{
        \item Пусть $S \subset R$ --- мультипликативное подмножество коммутативного кольца.
    Рассмотрим предпорядок на $S: a \preceq b \iff a \divs b$, и возьмём категорию $\cat J$, соответствующую данному предпорядку: $|\Mor(a, b)| = 1 \iff a \divs b$.

    Заведём $\cat F: \cat J \map \cat{CRing}$, $\cat F(s) = R_s$.
        Функтор действует на морфизмах так: если $b = ac$, то образ морфизма $a \map b$ --- это локализация по частному $c$ % https://q.uiver.app/#q=WzAsMixbMCwwLCJSX2EiXSxbMSwwLCIoUl9hKV9jPVJfYiJdLFswLDEsIlxcbGFtYmRhX2MiXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
        {R_a} \& {(R_a)_c=R_b}
        \arrow["{\lambda_c}", from=1-1, to=1-2]
        \end{tikzcd}\]
    Здесь копредел $\varinjlim\cat F = \varinjlim\limits_{s \in S} = S^{-1}R$.

    Это довольно удобно: если какое-то свойство выполнено для конечнопорождённых $R$-алгебр, и сохраняется при копределах, то оно выполнено и в локализации.
    }
    \examples{
    \item Если $\cat J = \o$ --- пустая категория, то конус над $\cat J \map \cat C$ --- это объект $C \in \cat C$, и его предел --- финальный объект.
    \item Если $\cat J = \{*\}$ --- категория с одним объектом, то конус над $\cat J \map \cat C$ --- это стрелка $* \map C$, и предел этого конуса --- сам объект $C$.
    \item Если $J = \{a, b\}$ с двумя морфизмами --- только тождественными --- то для функтора $\cat F: \arr{c}{a \mapsto A \\ b \mapsto B}$ $\varprojlim \cat F = A \times B, \varinjlim \cat F = A \sqcup B$.
    \item Эквалайзер и пулбэк --- тоже пределы.
    }
    Определим категорию функторов $\Func(\cat J, \cat C)$, объекты которой --- функторы, морфизмы --- естественные преобразования.
    Здесь стоит сказать либо что $\cat J$ --- малая категория, либо рассматривать большие категории, либо ещё как-то обойтись с теорией множеств.

    Теперь $\Delta$ --- функтор $\cat C \map \cat \Func(\cat J, \cat C)$.
    Теперь посмотрим на категорию запятой $(\Delta \downarrow \cat F)$ (здесь $\Delta$ рассматривается, как функтор, а $\cat F$ --- как объект).
    В ней объекты --- рассматриваемые конусы, морфизмы --- морфизмы конусов.

    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXERlbHRhIEMiXSxbMSwwLCJcXERlbHRhIFxcdmFycHJvamxpbSBcXGNhdCBGIl0sWzEsMSwiXFxjYXQgRiJdLFsxLDJdLFswLDJdLFswLDFdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\Delta C} \& {\Delta \varprojlim \cat F} \\
    \& {\cat F}
    \arrow[from=1-2, to=2-2]
    \arrow[from=1-1, to=2-2]
    \arrow[from=1-1, to=1-2]
    \end{tikzcd}\]
    Если рассмотреть предел, как функтор $\Func(\cat J, \cat C) \map \cat C$ (то есть забыть про стрелки в конусе), то это действительно будет функтор, определённый так на морфизмах:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXERlbHRhIFxcdmFycHJvamxpbVxcY2F0IEYiXSxbMSwwLCJcXERlbHRhIFxcdmFycHJvamxpbVxcY2F0IEYiXSxbMCwxLCJcXGNhdCBGIl0sWzEsMSwiXFxjYXQgRyJdLFsyLDNdLFswLDJdLFsxLDNdLFswLDEsIiIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\Delta \varprojlim\cat F} \& {\Delta \varprojlim\cat F} \\
    {\cat F} \& {\cat G}
    \arrow[from=2-1, to=2-2]
    \arrow[from=1-1, to=2-1]
    \arrow[from=1-2, to=2-2]
    \arrow[dashed, from=1-1, to=1-2]
    \end{tikzcd}\]
    \proposal{
    Функтор $\varprojlim$ является правым сопряжённым к $\Delta$, то есть $\Mor(\Delta C, \cat F) = \Mor(C, \varprojlim \cat F)$ естественно по $C$ (естественность по $\cat F$ получается автоматически).
    \provehere{
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXERlbHRhIEMiXSxbMSwwLCJcXERlbHRhIFxcdmFycHJvamxpbVxcY2F0IEYiXSxbMSwxLCJcXGNhdCBGIl0sWzAsMSwiIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzAsMl0sWzEsMl1d
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Delta C} \& {\Delta \varprojlim\cat F} \\
        \& {\cat F}
        \arrow[dashed, from=1-1, to=1-2]
        \arrow[from=1-1, to=2-2]
        \arrow[from=1-2, to=2-2]
        \end{tikzcd}\]
    Естественное преобразование $\Delta \circ \varprojlim \map \id$ --- коединица сопряжения.
    }
    }
    Аналогично, $\varinjlim$ --- левый сопряжённый к $\Delta$.
    \ok
    \theorem{
    Пусть $\cat G: \cat C \map \cat B$ --- левый сопряжённый к $\cat F: \cat B \map \cat C$.
    Пусть $\cat H: \cat J \map \cat B$. Тогда правый сопряжённый сохраняет пределы: $\cat F\left(\varprojlim \cat H\right) = \varprojlim \cat F \cat H$.
    \provehere{
        \indentlemma{Пусть $\cat F, \cat G, \cat H$ как в теореме, $\cat K: \cat J \map \cat C$ --- функтор. Тогда $\Mor_{\Func}(\cat K, \cat F \circ \cat H) \cong \Mor_{\Func}(\cat G\circ\cat K, \cat H)$ естественно по всем параметрам.}{
        Возьмём естественное преобразование $\eta: \cat K \map \cat F \circ \cat H$.

        $\forall X \in \cat J: \eta_X$ сопоставляется преобразование $\theta_X: [\cat K(X) \map \cat F \cat H(X)] \map [\cat G \cat K(X) \map \cat H(X)]$.
        Проверим, что диаграмма ниже коммутативна.
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNhdCBHKFxcY2F0IEsoWCkpIl0sWzEsMCwiXFxjYXQgSChYKSJdLFswLDEsIlxcY2F0IEcoXFxjYXQgSyhZKSkiXSxbMSwxLCJcXGNhdCBIKFkpIl0sWzAsMSwiXFx0aGV0YV9YIl0sWzEsMywiXFxjYXQgSChcXHBoaSkiXSxbMCwyLCJcXGNhdCBHKFxcY2F0IEsoXFxwaGkpKSIsMl0sWzIsMywiXFx0aGV0YV9ZIiwyXV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\cat G(\cat K(X))} \& {\cat H(X)} \\
            {\cat G(\cat K(Y))} \& {\cat H(Y)}
            \arrow["{\theta_X}", from=1-1, to=1-2]
            \arrow["{\cat H(\phi)}", from=1-2, to=2-2]
            \arrow["{\cat G(\cat K(\phi))}"', from=1-1, to=2-1]
            \arrow["{\theta_Y}"', from=2-1, to=2-2]
            \end{tikzcd}\]
        Для $\eta$ эта диаграмма выглядит так:% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNhdCBLKFgpIl0sWzEsMCwiXFxjYXQgRlxcY2F0IEgoWCkiXSxbMCwxLCJcXGNhdCBLKFkpIl0sWzEsMSwiXFxjYXQgRlxcY2F0IEgoWSkpIl0sWzIsMywiXFxldGFfWSJdLFswLDEsIlxcZXRhX1giXV0=
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\cat K(X)} \& {\cat F\cat H(X)} \\
            {\cat K(Y)} \& {\cat F\cat H(Y))}
            \arrow["{\eta_Y}", from=2-1, to=2-2]
            \arrow["{\eta_X}", from=1-1, to=1-2]
            \end{tikzcd}\]
        Применяя $\cat G$ к этой диаграмме, получаем% https://q.uiver.app/#q=WzAsNixbMCwwLCJcXGNhdCBHXFxjYXQgSyhYKSJdLFsxLDAsIlxcY2F0IEdcXGNhdCBGXFxjYXQgSChYKSJdLFswLDEsIlxcY2F0IEdcXGNhdCBLKFkpIl0sWzEsMSwiY2F0IEdcXGNhdCBGXFxjYXQgSChZKSkiXSxbMiwwLCJcXGNhdCBIKFgpIl0sWzIsMSwiXFxjYXQgSChZKSJdLFsyLDMsIlxcY2F0IEcoXFxldGFfWSkiXSxbMCwxLCJcXGNhdCBHKFxcZXRhX1gpIl0sWzAsMl0sWzEsM10sWzEsNCwiXFx0ZXh0e9C60L7QtdC00LjQvdC40YbQsH0iXSxbMyw1LCJcXHRleHR70LrQvtC10LTQuNC90LjRhtCwfSJdLFs0LDVdXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
            {\cat G\cat K(X)} \& {\cat G\cat F\cat H(X)} \& {\cat H(X)} \\
            {\cat G\cat K(Y)} \& {cat G\cat F\cat H(Y))} \& {\cat H(Y)}
            \arrow["{\cat G(\eta_Y)}", from=2-1, to=2-2]
            \arrow["{\cat G(\eta_X)}", from=1-1, to=1-2]
            \arrow[from=1-1, to=2-1]
            \arrow[from=1-2, to=2-2]
            \arrow["{\text{коединица}}", from=1-2, to=1-3]
            \arrow["{\text{коединица}}", from=2-2, to=2-3]
            \arrow[from=1-3, to=2-3]
            \end{tikzcd}\]
        Осталось проверить, что $\text{коединница} \circ \cat G(\eta_X) = \theta_X$, то есть $\theta$ --- действительно естественное преобразование.
        И ещё композиция $\eta_X \rightsquigarrow \theta_X \rightsquigarrow \eta_X$, и обратно --- тождественна.
        }
    \multline{\Mor_{\Func}\left(\Delta C, \cat F\circ\cat H\right) \cong \Mor_{\Func}\left(\cat G \Delta C, \cat H\right) \cong \Mor_{\Func}\left(\Delta \cat G(C), \cat H\right) \cong\\\cong \Mor_{\catB}\left(\cat G(C), \varprojlim\cat H\right) \cong \Mor_{\catC}\left(C, \cat F\left(\varprojlim \cat H\right)\right)}
    Отсюда (по определению предела) следует, что $\cat F\left(\varprojlim \cat H\right) = \varprojlim\cat F \circ \cat H$.
    }
    }
    \newlection{14 декабря 2023 г.}
    В зависимости от количества морфизмов в индексирующей категории предел называется \emph{конечным}, \emph{счётным} или \emph{малым}.
    \proposal{
        Пусть $\cat C$ --- категория, следующие условия эквивалентны.
    \numbers{
    \item В $\cat C$ существуют финальный объект, произведения и эквалайзеры.
    \item В $\cat C$ существуют финальный объект и все пулбэки.
    \item В $\cat C$ существуют все конечные пределы.
    }
    \provehere[Схема доказательства]{
    Понятно, что достаточно доказать $1 \then 3$.
        Это доказывается индукцией по количеству морфизмов.

    \underline{База:} если морфизмов нуль, то предел функтора $\cat F: \cat J \map \cat C$ --- произведение объектов $\cat F(J)$ по всем $J \in \cat J$.

    \underline{Переход:} При добавлении стрелки $J_1 \map J_2$ в $\cat J$ обозначим $A = \cat F(J_1), B = \cat F(J_2)$.
        Чтобы получить предел новой диаграммы, надо взять эквалайзер каких-то стрелок.
    }
    }
    \note{
    В случае счётного предела надо добавить условие существования счётного обратного предела --- предела диаграммы.
    }
    \subsection{Схема построения алгебраического замыкания}
    Берём $F$, пусть $P$ --- множество всех унитальных многочленов над $F$.
    Введём частичный порядок на $F: f \preceq g \iff f \divs g$.
    Далее рассматриваем категорию $\cat P$, построенную по данному частично упорядоченному множеству.

    Рассмотрим функтор $\cat P \map \cat{Field}, f \mapsto F_f$, сопоставляющий многочлену $f$ \emph{поле разложения} $f$ --- наименьшее (по включению) поле, в котором $f$ раскладывается на линейные множители.
    Оно существует, но его изоморфизм может быть не единственен.
    В частности, чтобы выбрать какое-то одно поле, в которое будет бить функтор, нужна какая-то версия аксиомы выбора.

    В частности (при $q = p^n$), $\Ff_q$ --- поле разложения $x^q - x \in \Ff_p[x]$.

    Так вот, тогда копредел этого функтора $\varinjlim\limits_{f \in P}F_f$ --- это некоторое кольцо.
    В этом кольце выбирается произвольный максимальный идеал $\mathfrak{m} \normeq \varinjlim\limits_{f \in P}F_f$.
    Он есть всегда, если $\varinjlim\limits_{f \in P}F_f \ne \{0\}$, и факторполе $F_f/\mathfrak{m}$ назовём это поле \emph{алгебраическим замыканием} $F$
    \section{Лемма Йонеды}
    \definition[Представимый функтор]{
    Ковариантный функтор $\catC \map \cat{Set}$, естественно изоморфный $\Mor_\catC(A, \_)$ для некоторого $ A\in \cat C$.

    Любой данный объект $A$ --- \emph{представляющий} объект.
    }
    Оказывается, это весьма частая ситуация.

    \examples{
    \item    Возьмём аффинное $n$-мерное пространство $\mathbb{A}^n$.
        С одной стороны, это функтор \begin{align*}\mathbb{A}^n: \cat{CRing} &\map \cat{Set} \\ R &\mapsto \mathbb{A}^n_R \bydef \defset{(r_1, \dots, r_n)}{r_i \in R}\end{align*}
    На морфизмах функтор задан понятным образом.

    С другой стороны, в классической алгебраической геометрии фиксируют какое-то алгебраически замкнутое поле, и рассматривают значения этого функтора на данном поле.

    Нам это $\mathbb{A}^n$ интересно именно, как функтор, и он является представимым: $\mathbb{A}^n\cong\Mor(\Z[t_1, \dots, t_n], \_)$.
        Если заменить $\cat{CRing}$ на $F\text{-}\cat{Alg}$, то $\mathbb{A}^n\cong\Mor(F[t_1, \dots, t_n], \_)$.

    Зафиксируем $f_1, \dots, f_m \in F[t_1, \dots, t_n]$.
        Пусть $X_R \subset \mathbb{A}^n_R: X_R \coloneqq \defset{x \in \A}{f_1(x) = \cdots = f_m(x) = 0}$.
        Это тоже функтор, причём он тоже представим: $X \cong \Mor_{F\text{-}\cat{Alg}}\left(F[t_1, \dots, t_n]/_{(f_1, \dots, f_m)}, \_\right)$.
        \item Рассмотрим представимый функтор $SL_n \cong \Mor(A, \_)$, где $A = F\left[g_{i,j}\right]_{i,j =1}^{n}/_{(\det g - 1)}$.
        Для точности стоит заметить, что здесь $SL_n$ бьёт в $\cat{Set}$, композиция с забывающим функтором.
        Эквивалентно, можно задать какую-то структуру на морфизмах (в данном случае --- структуры алгебры Хопфа).

    Эта матрица удовлетворяет универсальному свойству $\forall R, \forall a \in SL_n(R): \exists ! A \map R: \phi(g) = a$.

    В частности, $g \in SL_n(A)$ --- общий элемент, $g \map \id_A \in \Mor(A, A)$.
    }
    \lemma[Йонеда]{
    Пусть $\cat F: \catC \map \cat{Set}$, $\cat C$ --- малая категория.
        Пусть $A \in \catC$.

        Обозначим множество естественных преобразований $\Mor(A, \_) \map \cat F$ за $\Nat(\Mor(A, \_), \cat F)$.

        Тогда $\Nat(\Mor(A, \_), \cat F) \cong \cat F(A)$ естественно по $A$ и по $\cat F$.
    \provehere{
    Пусть $\eta: \Mor(A, \_) \map \cat F$.
    Сопоставим $\eta \rightsquigarrow \eta_A(\id_A) \in \cat F(A)$.

    Обратно, элементу $a \in \cat F(A)$ хотим сопоставить $\eta^{(a)} \in \Nat(\Mor(A, \_), \cat F)$.
    Рассмотрим $\phi \in \Mor(A, B)$, ей соответствует $\Mor(A, \phi) = \phi \circ \_$. Так как $\eta^{(a)}$ должно быть естественным преобразованием, то диаграмма ниже должна быть коммутативной.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXE1vcihBLCBBKSJdLFsxLDAsIlxcY2F0IEYoQSkiXSxbMCwxLCJcXHBoaSBcXGluIFxcTW9yKEEsIEIpIl0sWzEsMSwiXFxjYXQgRihCKSJdLFswLDFdLFsyLDNdLFswLDIsIlxccGhpIFxcY2lyYyBcXF8iXSxbMSwzLCJcXGNhdCBGKFxccGhpKSJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Mor(A, A)} \& {\cat F(A)} \\
        {\phi \in \Mor(A, B)} \& {\cat F(B)}
        \arrow[from=1-1, to=1-2]
        \arrow[from=2-1, to=2-2]
        \arrow["{\phi \circ \_}", from=1-1, to=2-1]
        \arrow["{\cat F(\phi)}", from=1-2, to=2-2]
        \end{tikzcd}\]
    Проверим коммутативность на элементе $\id_A$. Вниз он уходит в $\phi$, далее вправо --- в $\eta^{(a)}_B(\phi)$, что мы и хотим определить.

    Если же сначала пойти вправо, то будет $\eta_A^{(a)}(\id_A)$, и так как мы хотим, чтобы это преобразование было обратным, то надо положить $\eta_A^{(a)}(\id A) = a$. Отсюда получаем $\eta^{(a)}_B(\phi) \coloneqq \cat F(\phi)(a)$.

    Это размышление показывает, что если $\eta_A^{(a)}(\id_A) = a$, то $\eta^{(a)}_A$ задано единственным образом.

    Заметим, что $\eta_A^{(a)}(\id) = \cat F(\id)(a) = \id(a) = a$, поэтому построенные отображения $[\eta \mapsto \eta_A(\id_A)]$ и $[a \mapsto \eta^{(a)}]$ --- взаимно обратные.

    Теперь надо показать естественность.
        Она, конечно выполняется, так как построение не зависит ни от каких выборов, но давайте проверим это формально.

    Пусть $f: A \map B$ --- морфизм, $\theta: \cat F \map \cat G$ --- естественное преобразование.
        В данной диаграмме вертикальные стрелки --- построенные $[\eta \mapsto \eta_A(\id_A)]$.
    % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXE5hdChcXE1vcihBLCBcXF8pLCBcXGNhdCBGKSJdLFswLDEsIlxcY2F0IEYoQSkiXSxbMSwwLCJcXE5hdChcXE1vcihBLCBcXF8pLCBcXGNhdCBHKSJdLFsxLDEsIlxcY2F0IEcoQSkiXSxbMiwwLCJcXE5hdChcXE1vcihCLCBcXF8pLCBcXGNhdCBHKSJdLFsyLDEsIlxcY2F0IEcoQikiXSxbMCwyLCJcXHRoZXRhIFxcY2lyYyBcXF8iXSxbMCwxXSxbMiwzXSxbMSwzLCJcXHRoZXRhX0EiXSxbMiw0XSxbNCw1XSxbMyw1LCJcXGNhdCBHKGYpIl1d
        \begin{equation}\label{yoneda}\begin{tikzcd}[ampersand replacement=\&]
        {\Nat(\Mor(A, \_), \cat F)} \& {\Nat(\Mor(A, \_), \cat G)} \& {\Nat(\Mor(B, \_), \cat G)} \\
        {\cat F(A)} \& {\cat G(A)} \& {\cat G(B)}
        \arrow["{\theta \circ \_}", from=1-1, to=1-2]
        \arrow[from=1-1, to=2-1]
        \arrow[from=1-2, to=2-2]
        \arrow["{\theta_A}", from=2-1, to=2-2]
        \arrow[from=1-2, to=1-3]
        \arrow[from=1-3, to=2-3]
        \arrow["{\cat G(f)}", from=2-2, to=2-3]
        \end{tikzcd}\end{equation}
    Сначала проверим коммутативность левого квадратика.

    $\eta: \Mor(A, \_) \map \cat F$ отправляется вниз в $\eta_A(\id_A)$, после чего вправо уходит в $\theta_A(\eta_A(\id_A))$.
    Надо проверить, что это равно $(\theta \circ \eta)(\id_A)$, но это просто определение композиции естественных преобразований.

    Теперь надо проверить коммутативность правого квадрата, для этого сначала поймём, какая стрелка $\Nat(\Mor(A, \_), \cat G) \map \Nat(\Mor(B, \_), \cat G)$.
    $\Mor(B, \_) \overset{\_ \circ f}\Map \Mor(A, \_)$.
        Далее, на естественных преобразованиях действие устроено так:
        $\begin{tikzcd}[ampersand replacement=\&,cramped]
        {\lambda: \Mor(A, \_) \map \cat G} \\
        {\mu: \Mor(B, \_) \map \cat G}
        \arrow[shift right=14, maps to, from=1-1, to=2-1]
        \end{tikzcd}$
    Для $g \in \Mor(B, X): \mu_X(g) = \lambda_X(g \circ f)$.

    Теперь проверим коммутативность: $\lambda: \Mor(A, \_) \map \cat G$ отправляется вниз в $\lambda_A(\id_A)$, дальше вправо в $\cat G(f)(\lambda_A(\id_A))$.
    Если же пойти сначала вправо, потом вниз, то будет $\mu_B(\id_B)$, где $\mu$ определено выше; а именно, $\mu_B(\id_B) = \lambda_B(f)$.

    Используя коммутативность диаграммы, которая уже была нарисована выше, получаем, что $\id_A$ вниз и вправо уходит в $\lambda_B(f)$, а вправо и вниз --- в $\cat G(f)(\lambda_A(\id_A))$.
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXE1vcihBLCBBKSJdLFsxLDAsIlxcY2F0IEcoQSkiXSxbMCwxLCJcXE1vcihBLCBCKSJdLFsxLDEsIlxcY2F0IEcoQikiXSxbMCwxLCJcXGxhbWJkYV9BIl0sWzIsMywiXFxsYW1iZGFfQiJdLFswLDIsImYgXFxjaXJjIFxcXyJdLFsxLDMsIlxcY2F0IEcoXFxwaGkpIl1d
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Mor(A, A)} \& {\cat G(A)} \\
        {\Mor(A, B)} \& {\cat G(B)}
        \arrow["{\lambda_A}", from=1-1, to=1-2]
        \arrow["{\lambda_B}", from=2-1, to=2-2]
        \arrow["{f \circ \_}", from=1-1, to=2-1]
        \arrow["{\cat G(\phi)}", from=1-2, to=2-2]
        \end{tikzcd}\]
    Таким образом, оба квадрата коммутативны, и вся диаграмма~\eqref{yoneda} коммутативна, то есть преобразование естественно и по $A$, и по $\cat F$.
    }
    }
    \corollary{
    Множество естественных преобразований $\Nat(\Mor(A, \_), \Mor(B, \_)) \cong \Mor(B, A)$.
    Категория представимых функторов антиэквивалентна категории $\cat C$.
    }
\end{document}
