\documentclass[a4paper]{report}

\usepackage{../mathstemplate}
\usepackage{textcomp}

\date{III семестр, осень 2023 г.}
\title{Алгебра. Неофициальный конспект}
\author{Лекторы: Николай Александрович Вавилов \\ Степанов Алексей Владимирович \and \\ Конспектировал Леонид Данилевич}

\begin{document}

    \shorthandoff{"}
    \maketitle
    Изначально предполагалось, что лекции будет читать Николай Александрович Вавилов.

    13 сентября была прочитана третья лекция.
    Николай Александрович прекрасно выглядел, сообщил о пересдаче в следующем месяце, а после лекции как обычно остался, чтобы отвечать на вопросы.
    Я подошёл с вопросом о том, почему спин полуцелый (да, к лектору по алгебре --- это было упомянуто на лекции с обоснованием того, что $\R P^2$ двулистно накрывает плоскость (может, я ошибаюсь)).
    Николай Александрович что-то говорил про специальный индийский танец с чашей, про привязывание греческого кратера резинками за обе ручки к стенкам с последующим закручиванием, и про спиноры.
    К сожалению, про это я так ничего и не понял --- сложно описывать повороты трёхмерного тела в пространстве, а о спинорах я слышал в первый раз.

    Уже выйдя на улицу, я потом в шутку предложил на следующий день принести греческую чашу и резинки, чтобы Николай Александрович сам всё показал --- 14 сентября была запланирована очередная, четвёртая, лекция.

    Я пришёл на неё за несколько минут до начала, и с удивлением увидел, что у аудитории стоит лишь несколько человек.
    Оказалось, лекцию отменили --- Николай Алесандрович внезапно плохо себя почувствовал, и сообщил об этом администраторам.
    Нам написали, что 14 сентября лекции не будет, и её проведут в другой день.

    А уже вечером того дня до нас сарафанной почтой дошло известие о смерти учителя.
    Мой одногруппник, Лев, поделился чьим-то сообщением с фотографией записи, приписав <<Это правда?>>

    Сначала, кажется, никто не поверил.
    Я увидел текст, и подумал: <<И ведь действительно, сегодня лекции не было.
    Но он заболел, а не умер, что за глупая шутка>>.
    Потом я проверил, что запись на стене поделившегося человека действительно существует, и в ту же секунду Лев написал, что, похоже, это не шутка.

    Это была не шутка.

    Николай Александрович Вавилов, наш учитель алгебры, прекрасный преподаватель, которого любили, кажется, все, скоропостижно скончался 14 сентября 2023 года.

%    Все последующие лекции прочитаны Алексеем Владимировичем Степановым.
    \tableofcontents
    \newpage
    \setcounter{lection}{0}

    %полилинейная алгебра, теория представлений конечных групп, теория категорий


    \input{polylinear.tex}
    \input{representations.tex}
    \chapter{Теория категорий}
    \newlection{14 ноября 2023 г.}
    \definition[Категория $\mathscr{C}$]{\down
    \bullets{
        \item Класс объектов $\Obj\mathscr{C}$
        \item Для каждых $A, B \in \Obj\mathscr{C}$ множество морфизмов (стрелок) $\Mor_\mathscr{C}(A, B)$.

        Если $(A, B) \ne (A', B')$ (где $A,B,A',B'\in\Obj\mathscr{C}$), то $\Mor_\mathscr{C}(A, B) \cap \Mor_\mathscr{C}(A', B') = \o$.

        Таким образом, по морфизму $\alpha \in \Mor_\mathscr{C}(A, B)$ однозначно восстанавливаются $A, B$, их обозначают $A \bydef \source(\alpha), B = \target(\alpha)$
        \item Закон композиции морфизмов: $\forall A, B, C \in \Obj\mathscr{C}$ определено
        \begin{align*}
            \Mor_\mathscr{C}(B, C) \times \Mor_\mathscr{C}(A, B) &\map \Mor_\mathscr{C}(A, C)\\(\alpha,\beta)&\mapsto \alpha \beta
        \end{align*}
        \note{Иногда композицию записывают в обратном порядке: $\Mor_\mathscr{C}(A,B) \times \Mor_\mathscr{C}(B,C) \map \Mor_\mathscr{C}(A, C)$.}
        \item $\forall A \in \Obj\mathscr{C}$ определён тождественный морфизм $\id_A \in \Mor_\mathscr{C}(A, A)$, такой, что
        \[\forall B, C \in \Obj\mathscr{C}: \forall \beta \in \Mor_\mathscr{C}(A, B), \gamma \in \Mor_\mathscr{C}(C, A): \beta \id_A = \beta \text{ и }\id_A \gamma = \gamma\]
        \item Композиция ассоциативна, как только определена:
        \[\forall A, B, C, D \in \Obj\mathscr{C}: \forall \alpha \in \Mor_\mathscr{C}(A, B), \beta \in \Mor_\mathscr{C}(B, C), \gamma \in \Mor_\mathscr{C}(C, D): (\gamma \beta)\alpha = \gamma(\beta\alpha)\]
    }
    }
    Далее будем пользоваться сокращёнными обозначениями:
    \bullets{
        \item Вместо $A \in \Obj\mathscr{C}$ можно писать $A \in \mathscr{C}$.
        \item Вместо $\alpha \in \Mor_\mathscr{C}(A, B)$ можно писать $\alpha \in \Mor(A, B)$ или даже $\alpha: A \map B$, если категория ясна из контекста.
        В общем случае морфизм --- необязательно отображение, но в конкретных категориях это так, поэтому удобно мыслить о морфизмах, как о отображениях.
        \item Также определим класс всех морфизмов данной категории $\Mor\mathscr{C} = \bigsqcup\limits_{A, B \in \mathscr{C}}\Mor(A, B)$.
    }
    \examples[Категории]{
        \item $\Obj\mathscr{C} = \{A\}, \Mor(A, A)$ --- моноид.
        \item Конкретные категории --- неформально говоря, объекты со структурой, где морфизмы сохраняют данную структуру).
        \bullets{
            \item $\mathscr{Set}$. Объектами являются множества, морфизмами --- отображения.
            \item $\mathscr{Set}_*$. Объектами являются множества с отмеченной точкой $(X, x)$, $x \in X$, морфизмами --- отображения, сохраняющие отмеченную точку.
            \item $\mathscr{Group}$ --- категория групп с гомоморфизмами групп.
            \item $\mathscr{Ring}$ --- категория ассоциативных (необязательно коммутативных) колец с единицей с унитальными гомоморфизмами (сохраняющими единицу).
            \item $\mathscr{Rng}$ --- категория ассоциативных (необязательно коммутативных) колец с гомоморфизмами колец.
            \item $\mathscr{CRing}$ --- коммутативные кольца с единицей и унитальными гомоморфизмами.
            \item $\mathscr{CRng}$ --- коммутативные кольца с гомоморфизмами колец.
            \item $\mathscr{Ab}$ --- абелевы группы и аддитивные отображения.
            \item $\Lmod{R}$ --- левые $R$-модули и $R$-линейные отображения.
            \item $\modR{R}$ --- правые $R$-модули и $R$-линейные отображения.
            \item $\mathscr{Vect}_F$ --- конечномерные векторные пространства и $F$-линейные отображения.
            \item $\mathscr{Top}$ --- топологические пространства и непрерывные отображения.
            \item $\mathscr{Top}_*$ --- базированные топологические пространства (с отмеченной точкой) и непрерывные отображения, сохраняющие эту точку.
        }
    }
    \definition[Изоморфизм (изо) $\alpha: A \map B$]{
        Двусторонне обратимый морфизм: $\exists \beta: B \map A: \alpha \beta = \id_B, \beta\alpha = \id_A$.
    }
    \note{
        Как и в теории групп, если $\exists \beta, \beta': B \map A: \alpha\beta = \id_B, \beta'\alpha = \id_A$, то из ассоциативности $\beta = \beta'$.
    }
    \definition[Малая категория $\mathscr{C}$]{
        $\Obj\mathscr{C}$ --- множество.
    }
    \examples[Ещё категории]{
        \item \up \definition[Группоид]{Малая категория, в которой всякий морфизм --- изоморфизм.}
        Например, в топологическом пространстве можно ввести аналог фундаментальной группы --- \textit{фундаментальный группоид}, в котором пути --- стрелки из начала пути в конец пути.
        \item Пусть $\Gamma = (V, E)$ --- ориентированный граф.
        \bullets{
            \item $\mathscr{P}_\Gamma$ --- категория путей в $\Gamma$, для $x, y \in V: \Mor_{\mathscr{P}_\Gamma}(x, y)$ --- пути из $x$ в $y$.
            Композиция путей --- конкатенация.
            \item Категория достижимости $\mathscr{C}_\Gamma$. Для $x, y \in V: |\Mor_{\mathscr{C}_\Gamma}(x, y)| = \all{1,&x \cdots \rightarrow y \\ 0,& y\text{ недостижим из }x}$.
        }
        \item Пусть $(X, \le)$ --- частично упорядоченное множество, poset.
        Определим индексирующую категорию $\mathscr{C}_X$. $\Obj\mathscr{C}_X = X, |\Mor_{\mathscr{C}_X}(x, y)| = \all{1,&x \le  y \\ 0,& \text{иначе}}$
        \item Категория матриц $\mathscr{M}$ (над кольцом $R$ с единицей).
        $\Obj\mathscr{M} = \N$. $\Mor_\mathscr{M}(m, n) = M_{n \times m}(R)$.
        Композиция в данной категории --- умножение матриц:
        \begin{align*}
            \Mor(m, n) \times \Mor(k, m) &\map \Mor(k, n) \\ M_{n \times m}(R) \times M_{m \times k}(R) &\map M_{n \times k}(R)\\x, y &\mapsto xy
        \end{align*}
        Как будет видно позже, эта категория эквивалентна категории конечномерных векторных пространств.
        \item Категория стрелок. Пусть $\mathscr{C}$ --- категория, тогда $\mathscr{Arr}\mathscr{C}$ --- тоже категория.
        $\Obj\mathscr{Arr}\mathscr{C} = \Mor\mathscr{C}$. Пусть $\alpha: A \map B, \beta: C \map D$.
        Тогда $\Mor_{\mathscr{Arr}\mathscr{C}}(\alpha, \beta) = \defset{(\phi, \psi)}{\phi: A \map C, \psi: B \map D, \psi\alpha = \beta\psi}$
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJEIl0sWzAsMiwiXFxwaGkiXSxbMSwzLCJcXHBzaSJdLFswLDEsIlxcYWxwaGEiXSxbMiwzLCJcXGJldGEiXV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& D
              \arrow["\phi", from=1-1, to=2-1]
              \arrow["\psi", from=1-2, to=2-2]
              \arrow["\alpha", from=1-1, to=1-2]
              \arrow["\beta", from=2-1, to=2-2]
        \end{tikzcd}\]
        \item Пусть $\Gamma = (V, E)$ --- ориентированный граф, $\mathscr{C}$ --- категория.

        Определим категорию диаграмм в типе $\Gamma$ в категории $\mathscr{C}$ $\mathscr{D}_\mathscr{C}^\Gamma$.

        Предыдущий пример --- данный пример для графа $\Gamma$ следующего вида: $\begin{tikzcd}[ampersand replacement=\&]
                                                                                     \bullet \& \bullet\arrow[from=1-1, to=1-2]
        \end{tikzcd}$

        Формально $\Obj \mathscr{D}_\mathscr{C}^\Gamma = \defset{(f_o, f_m)}{f_o: V \map \Obj\mathscr{C}, f_m: E \map \Mor\mathscr{C}}$, причём стрелки согласованы: $\forall x \in E: f_o(\source(x)) = \source(f_m(x))$ и $f_o(\target(x)) = \target(f_m(x))$.

        $\Mor\mathscr{D}_\mathscr{C}^\Gamma\Big((f_o, f_m), (g_o, g_m)\Big) = \defset{\phi: V \map \Mor\mathscr{C}}{\phi(x) \in \Mor_\mathscr{C}(f_o(x), g_o(x))}$, причём морфизмами являются только те $\phi$, что $\forall (x, y) \in E$ диаграмма ниже коммутативна:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJmX28oeCkiXSxbMSwwLCJmX28oeSkiXSxbMCwxLCJnX28oeCkiXSxbMSwxLCJnX28oeSkiXSxbMCwyLCJcXHBoaSh4KSJdLFsxLDMsIlxccGhpKHkpIl0sWzAsMSwiZl9tKCh4LCB5KSkiXSxbMiwzLCJnX20oKHgsIHkpKSJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&,column sep=large,row sep=large]
        {f_o(x)}
              \& {f_o(y)} \\
              {g_o(x)} \& {g_o(y)}
              \arrow["{\phi(x)}", from=1-1, to=2-1]
              \arrow["{\phi(y)}", from=1-2, to=2-2]
              \arrow["{f_m((x, y))}", from=1-1, to=1-2]
              \arrow["{g_m((x, y))}", from=2-1, to=2-2]
        \end{tikzcd}\]

        Например, для графа $\begin{tikzcd}[ampersand replacement=\&]
                                 \bullet \& \bullet \\
                                 \bullet \& \bullet
                                 \arrow[from=1-1, to=1-2]
                                 \arrow[from=1-2, to=2-2]
                                 \arrow[from=1-1, to=2-1]
                                 \arrow[from=2-1, to=2-2]
        \end{tikzcd}$ объекты --- это диаграммы вида $\begin{tikzcd}[ampersand replacement=\&]
                                                          A \& B \\
                                                          C \& D
                                                          \arrow["\alpha", from=1-1, to=1-2]
                                                          \arrow["\delta"', from=2-1, to=2-2]
                                                          \arrow["\gamma"', from=1-1, to=2-1]
                                                          \arrow["\beta", from=1-2, to=2-2]
        \end{tikzcd}$, а морфизмы --- это диаграммы вида
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkMiXSxbMSwxLCJEIl0sWzIsMSwiQSciXSxbMiwyLCJDJyJdLFszLDEsIkInIl0sWzMsMiwiRCciXSxbMCwxLCJcXGFscGhhIl0sWzIsMywiXFxkZWx0YSIsMl0sWzAsMiwiXFxnYW1tYSIsMl0sWzEsMywiXFxiZXRhIl0sWzQsNSwiXFxnYW1tYSciLDJdLFs0LDYsIlxcYWxwaGEnIl0sWzUsNywiXFxkZWx0YSciLDJdLFs2LDcsIlxcYmV0YSciXSxbMCw0LCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSw2LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiw1LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMyw3LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& D \& {A'} \& {B'} \\
              \&\& {C'} \& {D'}
              \arrow["\alpha", from=1-1, to=1-2]
              \arrow["\delta"', from=2-1, to=2-2]
              \arrow["\gamma"', from=1-1, to=2-1]
              \arrow["\beta", from=1-2, to=2-2]
              \arrow["{\gamma'}"', from=2-3, to=3-3]
              \arrow["{\alpha'}", from=2-3, to=2-4]
              \arrow["{\delta'}"', from=3-3, to=3-4]
              \arrow["{\beta'}", from=2-4, to=3-4]
              \arrow[dashed, from=1-1, to=2-3]
              \arrow[dashed, from=1-2, to=2-4]
              \arrow[dashed, from=2-1, to=3-3]
              \arrow[dashed, from=2-2, to=3-4]
        \end{tikzcd}\]
    }
    \newlection{16 ноября 2023 г.}


    \section{Универсальные объекты}
    Пусть $\mathscr{C}$ --- категория, $I, F \in \mathscr{C}$.
    \definition[$I$ --- инициальный объект]{
        Для любого $A \in \mathscr{C}: \abs{\Mor(I, A)} = 1$.
    }
    \definition[$F$ --- финальный (терминальный) объект]{
        Для любого $A \in \mathscr{C}: \abs{\Mor(A, F)} = 1$.
    }
    \examples{
        \item В множествах инициальный --- пустое, финальный --- одноэлементное.
        \item В $\mathscr{Group}$ оба объекта --- тривиальная группа.
        \definition[Нулевой объект]{Одновременно финальный и инициальный объект.}
        \item В категории полей таких объектов нет (гомоморфизм полей сохраняет характеристику, и вообще всякий гомоморфизм полей инъективен).
        \item В $\mathscr{CRing}$ инициальный объект --- $\Z$, финальный объект --- нулевое кольцо.
        \item В категории $F$-алгебр с отмеченной точкой финальный объект --- $(\{0\}, 0)$, инициальный объект --- $(F[x], x)$.
    }
    Вспомним универсальное свойство локализации:
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSIl0sWzEsMCwiU157LTF9UiJdLFsxLDEsIkEiXSxbMCwyLCJcXGZvcmFsbCBcXHBzaSIsMl0sWzAsMSwiXFxwaGkiXSxbMSwyLCJcXGV4aXN0cyAhXFx0aGV0YSJdXQ==
    \[\begin{tikzcd}[ampersand replacement=\&]
          R \& {S^{-1}R} \\
          \& A
          \arrow["{\forall \psi}"', from=1-1, to=2-2]
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["{\exists !\theta}", from=1-2, to=2-2]
    \end{tikzcd}\]
    $\forall \phi: R \map A$, такого, что $\forall s \in S: \phi(s) \in A^*: \exists ! \theta: R \map A$, такой, что диаграмма коммутативна.

    Этому соответствует ... объект в категории $\mathscr{C}$, такой, что $\Obj\mathscr{C} = \defset{\phi: R \map A}{\phi(S) \subset A^*}$ и $\Mor_\mathscr{C}(\phi, \psi) = \defset{\alpha}{\alpha \psi = \phi}$.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJSIl0sWzEsMCwiQSJdLFsxLDEsIkIiXSxbMCwyLCJcXHBzaSIsMl0sWzAsMSwiXFxwaGkiXSxbMSwyLCJcXGFscGhhIl1d
    \[\begin{tikzcd}[ampersand replacement=\&]
          R \& A \\
          \& B
          \arrow["\psi"', from=1-1, to=2-2]
          \arrow["\phi", from=1-1, to=1-2]
          \arrow["\alpha", from=1-2, to=2-2]
    \end{tikzcd}\]
    Вообще, всякий объект с универсальным свойством --- инициальный или финальный в некоторой категории, но для этого именно нужна \textbf{уни}версальность --- так, у алгебраического замыкания есть изоморфизм, оно единственно с точностью до не единственного изоморфизма.

    Будем говорить, что объект \textit{единственен}, если он определён единственным образом с точностью до единственного изоморфизма.
    \proposal{
    Инициальный объект единственен (если существует).
        \provehere{
            Пусть $I, I'$ --- два инициальных объекта. $\Mor(I, I') = \{\alpha\}, \Mor(I', I) = \{\beta\}$, $\alpha\beta \in \Mor(I', I')$, и из инициальности $I': \alpha\beta = \id_{I'}$.

            Аналогично $\beta\alpha = \id_A$.
        }
    }
    \section{Функторы и не только}
    \subsection{Противоположная категория}
    Пусть $\mathscr{C}$ --- категория, тогда $\mathscr{C}^{\text{op}}$ --- \textit{противоположная категория}:
    \gather{\Obj\mathscr{C}^{\text{op}} = \Obj\mathscr{C}\qquad\forall A, B \in \mathscr{C}^{\text{op}}: \Mor_{\mathscr{C}^{\text{op}}}(A, B) = \Mor_{\mathscr{C}}(B, A)\\\alpha \underset{\mathscr{C}}\cdot \beta = \beta \underset{\mathscr{C}^{\text{op}}}\cdot \alpha}
    Неформально говоря, это категория с развёрнутыми стрелками.

    Всякому утверждению соответствует двойственное, и, например, доказав, что инициальный объект единственен, мы автоматически доказали единственность и финального объекта.
    \subsection{Декартово произведение категорий}
    Пусть $\mathscr{B}, \mathscr{C}$ --- категории.

    \definition[Декартово произведение категорий $\mathscr{B}\times\mathscr{C}$]{
    $\Obj(\mathscr{B}\times\mathscr{C}) = \Obj(\mathscr{B})\times\Obj(\mathscr{C})$, $\Mor_{\mathscr{B}\times\mathscr{C}}((B, C), (B', C')) = \Mor_\mathscr{B}(B, B') \times \Mor_\mathscr{C}(C, C')$.
    $(\alpha, \beta)(\alpha', \beta') = (\alpha\alpha', \beta\beta')$.
    }
    \subsection{Мономорфизмы и эпиморфизмы}
    Определим аналоги инъекции и сюръекции.
    Инъекция не склеивает точки, но в категориях у объектов нет точек, поэтому надо пойти другим путём.
    \definition[Мономорфизм (моно)]{Морфизм $\alpha$, такой, что его можно сокращать слева: $\forall \phi, \psi: \alpha\phi = \alpha \psi \then \phi = \psi$.
    Имеется в виду, что данное свойство выполняется для всех $\phi, \psi$, таких, что $\alpha\phi$ и $\alpha\psi$ определены.}
    Двойственно, морфизм называется \textit{эпиморфизмом (эпи)}, если на него можно сокращать справа.

    В конкретных категориях совсем не обязательно мономорфизмы --- инъективны (хотя это довольно часто), эпиморфимзы --- сюръективны (и это совсем неправда).

    Однако всегда инъекции --- моно, сюръекции --- эпи.
    \examples{
        \item В $\mathscr{Set}$ мономорфизмы и инъекции совпадают, также как и эпиморфизмы и сюръекции.
    \item В категории $\mathscr{Group}$ мономорфизмы и инъекции тоже совпадают, и эпиморфизмы и сюръекции --- тоже совпадают:
    % https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXFoiXSxbMCwwLCJcXGFscGhhOiBHIl0sWzEsMCwiSCJdLFsxLDJdLFswLDEsIjEgXFxtYXBzdG8geCIsMCx7Im9mZnNldCI6LTJ9XSxbMCwxLCIxIFxcbWFwc3RvIHkiLDIseyJvZmZzZXQiOjJ9XSxbMCwyLCJcXGFscGhhKHgpID0gXFxhbHBoYSh5KSIsMix7ImN1cnZlIjoyfV1d
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\alpha: G} \& H \\
        \Z
        \arrow[from=1-1, to=1-2]
        \arrow["{1 \mapsto x}", shift left=2, from=2-1, to=1-1]
        \arrow["{1 \mapsto y}"', shift right=2, from=2-1, to=1-1]
        \arrow["{\alpha(x) = \alpha(y)}"', curve={height=12pt}, from=2-1, to=1-2]
        \end{tikzcd}\]
    \note{
        Диаграмма с кратными стрелками называется коммутативной, если композиция любых двух (или более) стрелок совпадает, но кратные стрелки не обязаны быть равны друг другу.
    }
    \item В $\mathscr{CRing}$ вложение $\Z \hookrightarrow \Q$ --- очевидно, не сюръекция, хотя и эпиморфизм: в композиции $\begin{tikzcd}[ampersand replacement=\&]
              \Z \& \Q \& R
              \arrow[hook, from=1-1, to=1-2]
              \arrow[shift left, from=1-2, to=1-3]
              \arrow[shift right, from=1-2, to=1-3]
              \arrow[curve={height=18pt}, from=1-1, to=1-3]
        \end{tikzcd}$ всякий морфизм из $\Z$ или из $\Q$ однозначно определяется образом единицы.

        Любая локализация --- эпиморфизм, и вообще бывают ещё эпиморфизмы, не являющиеся композицией сюръекции и локализации, но построить их непросто.
    \item В $\mathscr{Group}$ эпиморфизмы --- сюръекции.
        \provehere{
            Всякий морфизм в $\mathscr{Group}$ разложим в композицию эпиморфизма и мономорфизма.
        Тогда если нашёлся несюръективный эпиморфизм, то найдётся вложение в $H \lneq G$, являющаяся мономорфизмом.

        Рассмотрим амальгамированное произведение $G_1 \underset{H}* G_2$, где $G_1 \cong G_2 \cong G$ и $G_1 \cap G_2 = H$, оно определено в следующем абзаце.

        $G_1 \underset{H}* G_2$ состоит из всевозможных слов $f_1 g_1 f_2 g_2 \dots f_n g_n$, где $f_i \in G_1, g_i \in g_2$.
        Ещё надо добавить соотношения $\all{(fh) (h^{-1}g) \sim fg\\f_1 1_{G_2} f_2 = f_1f_2 \\ g_1 1_{G_1} g_2 = g_1 g_2}$, где $f \in G_1, h \in H, g \in G_2$ и отфакторизовать по их нормальному замыканию.
        Если $H = \{1\}$, то $G_1 \underset{H}* G_2$ --- свободное произведение.

        Далее надо доказать, что если $f \in G_1 \sm H, g \in G_2 \sm H$, то элементы $f, g \in G_1 \underset{H}* G_2$ не равны.
        Если это доказано, то далее видим, что при $H \lneq G$ нарушается определение эпиморфизма:
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJIIl0sWzEsMCwiRyJdLFsyLDAsIkdfMSBcXHVuZGVyc2V0e0h9KiBHXzIiXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsxLDIsIiIsMCx7Im9mZnNldCI6MX1dLFsxLDIsIiIsMCx7Im9mZnNldCI6LTF9XSxbMCwyLCIiLDIseyJjdXJ2ZSI6M31dXQ==
            \[\begin{tikzcd}[ampersand replacement=\&]
                  H \& G \& {G_1 \underset{H}* G_2}
                  \arrow[hook, from=1-1, to=1-2]
                  \arrow[shift right, from=1-2, to=1-3]
                  \arrow[shift left, from=1-2, to=1-3]
                  \arrow[curve={height=18pt}, from=1-1, to=1-3]
            \end{tikzcd}\]
        }
    \item В категории метрических пространств отображения с плотным образом --- эпиморфизмы.
    В любом хаусдорфовом пространстве (возможно, даже только с первой аксиомой отделимости (да?)) это тоже так.
    }
    \subsection{Функторы}
    \definition[(Ковариантный) функтор между категориями $\mathscr{B}$ и $\mathscr{C}$ $\mathcal{F}: \mathscr{B} \map \mathscr{C}$] {\label{functor}Класс отображений
    \bullets{
    \item $\mathcal{F}: \Obj\mathscr{B} \map \Obj\mathscr{C}$.
    \item $\forall X, Y \in \mathscr{B}$: $\mathcal{F}_{X,Y}: \Mor_\mathscr{B}(X, Y) \map \Mor_{\mathscr{C}}(\mathcal{F}(x), \Fc(y))$.
    }
    причём отображения должны сохранять композицию и единицу (второе условие обязательно, например, категория --- моноид --- может сохранять композицию, но не единицу).}
    \definition[Строгий функтор $\mathcal{F}$]{
    $\forall X, Y \in \mathscr{B}: \Fc_{X,Y}$ инъективно.
    }
    \definition[Полный функтор $\mathcal{F}$]{
    $\forall X, Y \in \mathscr{B}: \Fc_{X,Y}$ сюръективно.
    }
    \note{
        Важно, как функторы ведут себя на морфизмах, изоморфные объекты могут склеиваться, или наоборот, у объекта может возникнуть изоморфная копия, и это не должно менять строгость или полноту функтора.
    }
    \examples{
    \item Забывающие функторы --- забывают часть структуры.
    \bullets{
    \item Любая конкретная категория отображается в $\mathscr{Set}$.
        Например, $\mathscr{Group} \map \mathscr{Set}$ --- строгий функтор.
    \item $\mathscr{Rng} \map \mathscr{Ab}$ --- сопоставляем кольцу его аддитивную группу, строгий функтор.
    \item $\mathscr{Rng} \map \mathscr{Mon}$ --- сопоставляем кольцу его мультипликативный моноид, строгий функтор.
    }
    \item $GL_n: \mathscr{Ring} \map \mathscr{Group}, R \mapsto GL_n(R)$. Это опять задание функтора на объектах, но морфизмах его надо продолжить интуитивным образом.

    Формально, для $\phi: R \map S$ надо задать $(GL_n)_{R, S}(\phi): GL_n(R) \map GL_n(S)$. $\forall a \in GL_n(R): (GL_n)_{R,S}(a)_{i,j} = \phi(a_{i,j})$. Далее надо проверить, что $(GL_n)_{R,S}(\phi)$ (часто его обозначают той же буквой $\phi$) --- гомоморфизм групп.
    }
    \subsection{Контравариантный функтор}
    Контравариантный функтор обращает стрелки. $\mathcal{F}: \mathscr{B} \map \mathscr{C}$ --- это на самом деле функтор $\mathscr{B}^\text{op} \map \mathscr{C}$.
    Несложно проверить, что он совпадает с функтором $\mathscr{B} \map \mathscr{C}^\text{op}$.

    В частности, $\forall X, Y \in \mathscr{B}: \mathcal{F}_{X,Y}: \Mor(Y, X) \map \Mor(\Fc(x), \Fc(y))$.

    Согласно этому определению, контравариантный функтор не является функтором.
    \example{
    Пусть $\mathscr{C}$ --- категория с объектом $X \in \mathscr{C}$.
    Зададим функтор \begin{align*}\Mor(\_, X): \mathscr{C} &\map \mathscr{Set}\\ Y &\mapsto \Mor(Y, X)\\\forall \phi: Y \map Y': \Mor(\phi, X): \Mor(Y', X) &\map \Mor(Y, X),& \alpha \mapsto \alpha \phi\end{align*}
    Функтор $\Mor(\_, X)$ особо опасен (например, он контравариантен), с ним стоит обращаться с чрезвычайной осторожностью.
    }
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzAsMSwiQiJdLFsxLDAsIlxcTW9yX1xcY2F0e0N9KEEsIFgpIl0sWzEsMSwiXFxNb3JfXFxjYXR7Q30oQiwgWCkiXSxbMCwxLCJcXHBoaSIsMl0sWzEsM10sWzAsMl0sWzMsMiwiXFxfIFxcY2lyYyBcXHBoaSIsMl0sWzQsNywiIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjEwLCJ0YXJnZXQiOjEwfSwibGV2ZWwiOjEsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
          A \& {\Mor_\cat{C}(A, X)} \\
          B \& {\Mor_\cat{C}(B, X)}
          \arrow[""{name=0, anchor=center, inner sep=0}, "\phi"', from=1-1, to=2-1]
          \arrow[from=2-1, to=2-2]
          \arrow[from=1-1, to=1-2]
          \arrow[""{name=1, anchor=center, inner sep=0}, "{\_ \circ \phi}"', from=2-2, to=1-2]
          \arrow[shorten <=5pt, shorten >=5pt, maps to, from=0, to=1]
    \end{tikzcd}\]
    \newlection{21 ноября 2023 г.}
    Можно рассмотреть ковариантную версию: функтор $\Mor_\cat{C}(X, \_)$.
    \[\Mor_\cat{C}(X, _): \phi \mapsto [\alpha \mapsto \phi\alpha]\]
    Наконец, можно рассмотреть функтор $\Mor(\_, \_): \catC^\text{op} \times \catC \map \cat{Set}$.
    \examples[Не функторы]{
    \item Рассмотрим отображение $\cat{Center}: \cat{Group} \map \cat{Group}$, сопоставляющее группе её центр.
    Это не функтор, так как при гомоморфизмах центр необязательно отображается в центр.

    Например, рассмотрим полупрямое произведение $C_2 \rightthreetimes C_3 \cong S_3$. Ему соответствует композиция
    \[C_2 \map S_3 \map C_2\]
    Функтор отобразит эту цепочку в $C_2 \map 1 \map C_2$, так как композиция --- $\id$, но что?
    \item $Aut: \cat{C} \map \cat{Group}, A \mapsto \Aut(A)$ --- снова не функтор.
        Нет разумного способа сопоставить морфизмам $A \map B$ и $ A\map A$ морфизм $B \map B$.
    }
    \examples{
    \item Сопоставление группе коммутанта --- функтор.
    \[\cat{D}: \cat{Group} \map \cat{Group}\]
    $\cat{D} = [G, G], \cat{D}(\phi): [D, D] \map [H, H]$ --- сужение $\phi$.
    \item Абелианизация тоже является функтором. $\ab{}: \cat{Group} \map \cat{Group}, \ab{}(G) = G^{\ab{}} = G/[G,G]$.
     %https://q.uiver.app/#q=WzAsNCxbMCwwLCJHIl0sWzEsMCwiSCJdLFsyLDAsIkheXFxhYiJdLFsxLDEsIkdee1xcYWJ9Il0sWzAsM10sWzMsMiwiXFxhYihcXHBoaSkiLDJdLFswLDEsIlxccGhpIl0sWzEsMl1d
        \[\begin{tikzcd}[ampersand replacement=\&]
              G \& H \& {H^{\ab{}}} \\
              \& {G^{\ab{}}}
              \arrow[from=1-1, to=2-2]
              \arrow["{\ab{}(\phi)}"', from=2-2, to=1-3]
              \arrow["\phi", from=1-1, to=1-2]
              \arrow[from=1-2, to=1-3]
        \end{tikzcd}\]
    \item Категория всех категорий

    Категорию совсем всех категорий рассмотреть не получится, так как класс всех классов, так же как и множество всех множеств, не определён.

    Вместо этого рассмотрим категорию всех малых категорий $\cat{Cat}$.
    Морфизмами в ней являются функторы.

    \item Категория диаграмм в $\cat{C}$ типа $\Gamma$, которая была рассмотрена ранее --- это функторы из путей $\mathcal{P}_\Gamma$ в графе в $\cat{C}$:
    \[\cat{D}_\Gamma(\catC) = \Func(\mathcal{P}_\Gamma, \catC)\]
    \item Функторы из категории достижимости в $\cat{C}$ $\Func(\mathcal{C}_\Gamma, \catC)$ --- класс коммутативных диаграмм в $\catC$.
        Например, если $\Gamma$ --- такой граф $\begin{tikzcd}[ampersand replacement=\&]
              A \& B \\
              C \& D
              \arrow[from=1-1, to=2-1]
              \arrow[from=1-1, to=1-2]
              \arrow[from=1-2, to=2-2]
              \arrow[from=2-1, to=2-2]
        \end{tikzcd}$, то $|\Mor(A, D)| = 1$, поэтому функтор должен перевести стрелки $A \map B \map D$ и $A \map C \map D$ с равной композицией в стрелки с равной композицией.

    Превратим её в категорию коммутативных диаграмм.
        Для этого надо ввести морфизмы между коммутативными диаграммами.
    }
    \section{Естественные преобразования}
    \begin{flushright}{<<Всё естественно, что не безобразно>>}\end{flushright}
    Пусть $\cat{F}, \cat{G}: \cat{B} \map \catC$ --- два функтора.
    Категорию $\catB$ здесь стоит воспринимать, как \textit{индексирующую категорию}, как граф, по которому строится категория диаграмм.

    \textit{Естественное преобразование} $\eta: \cat{F} \map \cat{G}$ --- класс морфизмов, $\eta_B: \cat{F}(B) \map \cat{G}(B)$, где $B \in \cat{B}$, такой, что $\forall \phi \in \Mor_\catB(A, B)$ диаграмма коммутирует.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGNhdHtGfShBKSJdLFsxLDAsIlxcY2F0e0Z9KEIpIl0sWzAsMSwiXFxjYXR7R30oQSkiXSxbMSwxLCJcXGNhdHtHfShCKSJdLFswLDEsIlxcY2F0e0Z9KFxccGhpKSJdLFsyLDMsIlxcY2F0e0d9KFxccGhpKSJdLFswLDIsIlxcZXRhX0EiLDJdLFsxLDMsIlxcZXRhX0IiXV0=
    \[\begin{tikzcd}[ampersand replacement=\&]
    {\cat{F}(A)} \& {\cat{F}(B)} \\
    {\cat{G}(A)} \& {\cat{G}(B)}
    \arrow["{\cat{F}(\phi)}", from=1-1, to=1-2]
    \arrow["{\cat{G}(\phi)}", from=2-1, to=2-2]
    \arrow["{\eta_A}"', from=1-1, to=2-1]
    \arrow["{\eta_B}", from=1-2, to=2-2]
    \end{tikzcd}\]

    \examples[Естественные преобразования]{
    \item Определитель $\det_n: GL_n \map GL_1$. ($GL_1(R) \cong R^*$.)
        В данном случае $GL_n, GL_1: \cat{CRing} \map \cat{Group}$, проверим, что $\forall A, B \in \cat{CRing}$.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJHTF9uKEEpIl0sWzEsMCwiR0xfbihCKSJdLFswLDEsIkdMXzEoQSkiXSxbMSwxLCJHTF8xKEIpIl0sWzAsMSwiXFxwaGkiXSxbMiwzLCJcXHBoaSJdLFswLDIsIlxcZGV0IiwyXSxbMSwzLCJcXGRldCJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {GL_n(A)} \& {GL_n(B)} \\
        {GL_1(A)} \& {GL_1(B)}
        \arrow["\phi", from=1-1, to=1-2]
        \arrow["\phi", from=2-1, to=2-2]
        \arrow["\det"', from=1-1, to=2-1]
        \arrow["\det", from=1-2, to=2-2]
        \end{tikzcd}\]
        Естественность означает $\phi(\det(a)) = \det(\phi(a))$, что верно, так как $\det$ --- многочлен от коэффициентов, а $\phi$ --- гомоморфизм коэффициентов.
    \item Рассмотрим два функтора $\cat{M}$ и ${}^{*}: \cat{CRing} \map \cat{Mon}$, отображающие кольцо в моноид его элементов по умножению, и группу обратимых элементов (являющуюся моноидом) соответственно.
    $\eta: R^* \hookrightarrow \cat{M}(R)$.
    \item Вложение (?) --- естественное преобразование между коммутантом и тождественным отображением $\cat{D}, \id: \cat{Group}\map\cat{Group}$:
    \item\up\definition[Естественный изоморфизм]{Естественное преобразование, состоящее из изоморфизмов.}
        В категории множеств $\cat{Set}$: $\Mor(X, \Mor(Y, Z)) \leftrightarrow \Mor(X \times Y, Z)$: $g(x)(y) = f(x, y)$.

        Это стоит читать, как естественное преобразование между функторами $\Mor(\_, \Mor(\_, \_)): \cat{Set}^{\op} \times \cat{Set}^{\op} \times \cat{Set} \map \cat{Set}$ и $\Mor(\_ \times \_, \_)): \cat{Set}^{\op} \times \cat{Set}^{\op} \times \cat{Set} \map \cat{Set}$.
    \item Под естественным преобразованием $V \map V^{**}$ подразумевается естественное преобразование между функторам $\id$ и ${}^{**}$ действующих $\Lmod{F} \map \Lmod{F}$.

        Промежуточный функтор ${}^{*}$ --- контравариантен.

    $V^* \coloneqq \Mor_{\Lmod{F}}(V, F)$, значит, $V^{**} = \Mor_{\Lmod{F}}(\Mor_{\Lmod{F}}(V, F), F)$.
    Естественное преобразование сопоставляет функционалу $\phi \in V^*$ и вектору $x \in V$ их каноническое спаривание $\eps_x(f) = \phi(x) = \angles{\phi|x}$.

    Это преобразование не является изоморфизмом даже для счётномерных векторных пространств --- для конечных полей легко проверить различие мощностей.

    Естественное преобразование $\eps: \id \map {}^{**}$ можно сузить на категорию $\cat{Vect}_F$ конечномерных векторных пространств, там оно является изоморфизмом в силу подсчёта размерностей.
    }
    \counterexample[Неестественное преобразование]{
        Изоморфизм конечномерного векторного пространства, и двойственного к нему.
    }
    Неформально, всякое преобразование, в котором не задействованы какие-то выборы, является естественным.
    \subsection{Эквивалентность категорий}
    Изоморфизм категорий помнит слишком много, мы не хотим следить за кратностью изоморфных объектов.

    \definition[Категории $\catB$ и $\catC$ эквивалентны]{
        Существуют функторы $\cat{F}: \catB \map \catC$ и $\cat{G}: \catC \map \catB$, такие, что $\cat{F}\circ\cat{G} \cong \id_\catC$ и $\cat{G}\circ\cat{F} \cong \id_\catB$, здесь $\cong$ --- естественный изоморфизм.
    }
    Ранее мы фактически доказали, что категории $\cat{Vect}_F$ и $\cat{Vect}_F^{\op}$ эквивалентны, (но они не изоморфны).
    \examples[Ещё естественные преобразования]{
        \item $R \otimes_R \_ \cong \id$, или иначе пишут $R \otimes_R M \cong M$ естественно по $M$.

        Элемент $\sum r_i \otimes m_i$ равен $1 \otimes \sum r_i m_i$, и отображается в $\sum r_i m_i$.
        \item $\Mor_{\Lmod{R}}(X, \Mor_{\Lmod{R}}(Y, Z)) \cong \text{Bi}_{\Lmod{R}}(X, Y; Z)\cong \Mor_{\Lmod{R}}(X \otimes_R Y, Z)$.
        \item Естественный изоморфизм в категории конечномерных векторных пространств $\cat{Vect}_F$: $\Mor(X, Y \otimes Z) \cong \Mor(X \otimes Z^*, Y)$.
    }
    \newlection{23 ноября 2023 г.}
    Рассмотрим естественные по $X$ и по $Y$ преобразования в категории $\Lmod{R}$, где $R$ --- коммутативное кольцо.
    \begin{align*}X^* \otimes Y &\map \Mor(X, Y) \\ \phi \otimes y_i &\mapsto [x \mapsto \phi(x)y_i]\end{align*}
    Иными словами, имеется естественное преобразование между функторами $\cat{F}(X, Y) = X^* \otimes Y$ и $\Mor$, которые действуют $\Lmod{R}^{\op} \times \Lmod{R} \map \Lmod{R}$.
    Если $R$ --- поле, и пространства --- конечномерны, то это естественный изоморфизм.
    \ok
    Рассмотрим два функтора $\cat{F}, \cat{G}: \cat{B} \map \cat{C}$.
    Пусть имеется также функтор $\cat{H}: \catC \map \catA$, и естественное преобразование $\eta: \cat{F} \map \cat{G}$.

    Беря композицию функтора и естественного преобразования, получаем естественное преобразование $\cat{H}\eta: \cat{H}\circ\cat{F} \map \cat{H} \circ \cat{G}$.
    \example{
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXE1vcihYIFxcb3RpbWVzIFksIFopIl0sWzIsMCwiXFxNb3IoWCwgWV4qIFxcb3RpbWVzIFopIl0sWzEsMSwiXFxNb3IoWCwgXFxNb3IoWSwgWikpIl0sWzEsMl0sWzIsMCwiXFxzaW0iLDIseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDBdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
        {\Mor(X \otimes Y, Z)} \&\& {\Mor(X, Y^* \otimes Z)} \\
        \& {\Mor(X, \Mor(Y, Z))}
        \arrow[from=1-3, to=2-2]
        \arrow["\sim"', Rightarrow, no head, from=2-2, to=1-1]
        \arrow[from=1-3, to=1-1]
        \end{tikzcd}\]
    }
    Для объекта $B \in \mathscr{B}: (\cat{H}\eta)_B = \cat{H}(\eta_B): \cat{H}(\cat{F}(B)) \map \cat{H}(\cat{G}(B))$.

    Если же функтор определён так $\cat{H}: \catA \map \catB$, то можно задать естественное преобразование $\eta \cat{H}: \cat{F} \circ \cat{F} \map \cat{G} \circ \cat{H}$.
    \excersice{
    Задать $\eta\cat{H}$.
    }
    Рассмотрим категорию конечномерных векторных пространств $\cat{Vect}_F$ и категорию матриц $\cat{M}_F$.
    Идеологически правильнее рассматривать $\Obj \cat{M}_F$ не как натуральные числа, а как пространства столбцов.

    Определим \begin{align*}\cat{F}: \cat{M}_F &\map \cat{Vect}_F\\ \N = \Obj\cat{M}_F \ni A & \mapsto F^n \\ \Mor(n, m) \ni A &\mapsto \text{оператор умножения на матрицу $A$}\end{align*}

    Далее чтобы доказать эквивалентность категорий, то надо либо уметь пользоваться аксиомой выбора для классов, либо каким-то образом сделать категорию $\cat{Vect}_F$ малой (которая пока не является множеством, но её объекты при фиксированном поле имеют фиксированную мощность, то есть не очень большие)
    Отображение в обратную сторону устроим так.
    В каждом векторном пространстве $V$ выберем базис $\angles{v_1, \dots, v_n}$, причём в каждом $F^n$ --- выберем стандартный базис, и обратное отображение устроим так:
    \begin{align*}\cat{G}: \cat{Vect}_F &\map \cat{M}_F \\ \cat{G}(V) &= \dim V \\ \cat{G}(\alpha) &= \text{матрица $\alpha$ в выбранном базисе}\end{align*}
    Композиция $\cat{G} \circ \cat{F}$ тождественна, а композиция $\cat{F} \circ \cat{G}$ не инъективна на объектах, но, тем не менее, естественно изоморфна тождественному.
    \note{
    Ещё одним способом не пользоваться аксиомой выбора будет рассматривать вместо $\cat{Vect}_F$ категорию базированных векторных пространств --- векторных пространств, в которых заранее выбран базис.
    }
    \proposal{
    Рассмотрим функтор $\cat{F}: \catB \map \catC$. $\cat{F}$ является эквивалентностью категорий $\iff \cat{F}$ --- строгий, полный, неизоморфные объекты отображаются в неизоморфные, и, наконец, \textit{квазисюръективный}: последнее значит $\forall C \in \catC: \exists B \in \catB: \cat{F}(B) \cong C$.
    }
    \section{(Ко)эквалайзеры и (ко)пределы}
    Пусть $\phi, \psi: A \map B$
    \definition[Эквалайзер или уравнитель морфизмов $\phi, \psi$]{
        Морфизм $\eps: E \map A$, уравнивающий $\phi$ и $\psi$: $\phi\eps = \psi\eps$, причём такой, что $\forall \eps': E' \map A$ (такого, что $\phi\eps' = \psi\eps'$) $\exists! \alpha: E' \map E$, такая, что диаграмма коммутативна
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJFJyJdLFsxLDIsIlxccGhpIiwwLHsib2Zmc2V0IjotMX1dLFsxLDIsIlxccHNpIiwyLHsib2Zmc2V0IjoxfV0sWzAsMSwiXFxlcHMiXSxbMywxLCJcXGVwcyciLDJdLFszLDAsIlxcYWxwaGEiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              E \& A \& B \\
              {E'}
              \arrow["\phi", shift left, from=1-2, to=1-3]
              \arrow["\psi"', shift right, from=1-2, to=1-3]
              \arrow["\eps", from=1-1, to=1-2]
              \arrow["{\eps'}"', from=2-1, to=1-2]
              \arrow["\alpha", dashed, from=2-1, to=1-1]
        \end{tikzcd}\]
    }
    В $\cat{Set}$ эквалайзер $\phi, \psi: A \map B$ --- это вложение $E \hookrightarrow A$, где $E = \defset{a \in A}{\phi(a) = \psi(a)}$.

    В категории $\catD$, такой, что $\Obj\catD = \defset{(E, \eps)}{\phi\eps = \psi\eps}$, и $\Mor_\catD((E', \eps'), (E, \eps)) = \defset{\alpha: E' \map E}{ \eps' = \eps\alpha}$ эквалайзер --- финальный объект в $\catD(\phi, \psi)$.

    Для определения коэквалайзера надо развернуть все стрелки:

    Пусть $A \leftarrow B: \phi, \psi$.
    \definition[Коэквалайзер]{
        Морфизм $\eps: A \map E$, уравнивающий $\phi$ и $\psi$: $\eps\phi = \eps\psi$, причём такой, что $\forall \eps': A \map E'$ (такого, что $\eps'\phi = \eps'\psi$) $\exists! \alpha: E \map E'$, такая, что диаграмма коммутативна
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJFJyJdLFsxLDIsIlxccGhpIiwwLHsib2Zmc2V0IjotMSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwyLCJcXHBzaSIsMix7Im9mZnNldCI6MSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwzLCJcXGFscGhhIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzEsMCwiXFxlcHMiLDJdLFsxLDMsIlxcZXBzJyJdXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              E \& A \& B \\
              {E'}
              \arrow["\phi", shift left, tail reversed, no head, from=1-2, to=1-3]
              \arrow["\psi"', shift right, tail reversed, no head, from=1-2, to=1-3]
              \arrow["\alpha"', dashed, from=1-1, to=2-1]
              \arrow["\eps"', from=1-2, to=1-1]
              \arrow["{\eps'}", from=1-2, to=2-1]
        \end{tikzcd}\]
    }
    В $\cat{Set}$ коэквалайзер $\phi, \psi: B \map A$ --- это факторизация $\eps: A \map A/_\sim$, где $\sim$ --- отношение эквивалентности, порождённое $\phi(b) \sim \psi(b)$.

    В $\cat{Group}$ коэквалайзер $\phi, \psi: G \map H$ --- это факторизация по нормальному замыканию $\{\phi(g)\psi(g^{-1})\}$.

    \proposal{
    Эквалайзеры --- мономорфизмы, коэквалайзеры --- эпиморфизмы.
    \provehere{
    Докажем, что эквалайзер --- мономорфизм, второе утверждение следует из двойственности.

    Рассмотрим $\eps$ --- эквалайзер $\phi$ и $\psi$, и пусть $\alpha, \beta: X \map E$ --- два отображения.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJYIl0sWzEsMiwiXFxwaGkiLDAseyJvZmZzZXQiOi0xfV0sWzEsMiwiXFxwc2kiLDIseyJvZmZzZXQiOjF9XSxbMCwxLCJcXGVwcyJdLFszLDAsIlxcYWxwaGEiLDAseyJvZmZzZXQiOi0xfV0sWzMsMSwiXFx0aGV0YSIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDAsIlxcYmV0YSIsMix7Im9mZnNldCI6MX1dXQ==
        \[\begin{tikzcd}[ampersand replacement=\&]
              E \& A \& B \\
              X
              \arrow["\phi", shift left, from=1-2, to=1-3]
              \arrow["\psi"', shift right, from=1-2, to=1-3]
              \arrow["\eps", from=1-1, to=1-2]
              \arrow["\alpha", shift left, from=2-1, to=1-1]
              \arrow["\theta"', dashed, from=2-1, to=1-2]
              \arrow["\beta"', shift right, from=2-1, to=1-1]
        \end{tikzcd}\]
    Тогда $\phi\theta = \phi\eps\alpha$ и $\psi\theta = \psi\eps\alpha$, то есть $\theta$ --- тоже эквалайзер.

    Но по определению эквалайзера существует и единственная стрелка $X \map E$, значит, $\alpha = \beta$, то есть $\eps$ --- мономорфизм.
    }
    }
    \proposal{
    Эквалайзер, являющийся эпиморфизмом --- изоморфизм.
    \provehere{
        Пусть $\eps$ --- эквалайзер.
        Так как $\phi\eps = \psi\eps$, и $\eps$ --- эпиморфизм, то $\phi = \psi$. Но тогда $\id: A \map A$ --- тоже эквалайзер, и два эквалайзера отличаются на изоморфизм
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzEsMCwiQSJdLFsyLDAsIkIiXSxbMCwxLCJBIl0sWzEsMiwiXFxwaGkiLDAseyJvZmZzZXQiOi0xfV0sWzEsMiwiXFxwc2kiLDIseyJvZmZzZXQiOjF9XSxbMCwxLCJcXGVwcyJdLFszLDEsIlxcaWQiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywwLCJcXGVwcyIsMCx7Im9mZnNldCI6LTF9XSxbMCwzLCJcXGV4aXN0cyEiLDAseyJvZmZzZXQiOi0xLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XV0=
        \[\begin{tikzcd}[ampersand replacement=\&]
              E \& A \& B \\
              A
              \arrow["\phi", shift left, from=1-2, to=1-3]
              \arrow["\psi"', shift right, from=1-2, to=1-3]
              \arrow["\eps", from=1-1, to=1-2]
              \arrow["\id"', dashed, from=2-1, to=1-2]
              \arrow["\eps", shift left, from=2-1, to=1-1]
              \arrow["{\exists!}", shift left, dotted, from=1-1, to=2-1]
        \end{tikzcd}\]
    }
    }
    \section{Произведения и копроизведения}
    Зафиксируем $B, C \in \mathscr{C}$.
    \definition[Произведение $B$ и $C$]{
    Финальный объект в категории $\begin{tikzcd}[ampersand replacement=\&]
          A \& B \\
          C
          \arrow[from=1-1, to=2-1]
          \arrow[from=1-1, to=1-2]
    \end{tikzcd}$. Произведение обозначается $A \times B$.
    Морфизмы в данной категории --- это стрелка $\phi$:
    % https://q.uiver.app/#q=WzAsNCxbMSwxLCJBIl0sWzIsMSwiQiJdLFsxLDIsIkMiXSxbMCwwLCJBJyJdLFswLDIsIlxcZ2FtbWEiXSxbMCwxLCJcXGJldGEiLDJdLFszLDAsIlxccGhpIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZG90dGVkIn19fV0sWzMsMSwiXFxiZXRhJyIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFszLDIsIlxcZ2FtbWEnIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
    \[\begin{tikzcd}[ampersand replacement=\&]
    {A'} \\
    \& A \& B \\
    \& C
    \arrow["\gamma", from=2-2, to=3-2]
    \arrow["\beta"', from=2-2, to=2-3]
    \arrow["\phi"{description}, dotted, from=1-1, to=2-2]
    \arrow["{\beta'}", dashed, from=1-1, to=2-3]
    \arrow["{\gamma'}"', dashed, from=1-1, to=3-2]
    \end{tikzcd}\]
    }
    Иными словами, произведение $B \times C$ --- это объект $A$ и морфизмы $\beta: A \map B, \gamma: A \map C$, такой, что $\forall A' \in \Obj \catC, \beta': A' \map B, \gamma': A' \map C$ $\exists! \phi: A' \map A: \beta\phi = \beta'$ и $\gamma\phi = \gamma'$.

    Практически всегда в конкретных категориях произведение --- декартово произведение, отображение --- проекция.
    Фактически, элементу $a \in A$ сопоставляется пара $(\beta(a), \gamma(a)) \in B \times C$.

    Иными словами, $\cat{F}(A) \coloneqq \Mor(A, B) \times \Mor(A, C) \cong \Mor(\_, B \times C)$ --- естественный изоморфизм функторов.

    Копроизведение --- двойственный объект к произведению.
    \examples[Копроизведение]{
    \item В $\cat{Group}$ копроизведение --- это свободное произведение групп.
    \item В $\cat{CRing}$ копроизведение --- это тензорное произведение над $\Z$.
    Умножение на разложимых тензорах задано в виде $(b \otimes c)(b' \otimes c') = bb' \otimes cc'$.
    }
\end{document}